if ((typeof(basics$0ElabTopdec$1$9)) == "undefined") {basics$0ElabTopdec$1$9 = {};
};
(function(){basics$0ElabTopdec$1$9.map_Some_on_2nd$5465 = function(v$8426,v$8427){return [v$8426,[0,v$8427]];
};
basics$0ElabTopdec$1$9.map_Some_on_2nd$$5472 = function(v$8428,v$8429,v$8430){return [v$8428,[0,v$8429],v$8430];
};
basics$0ElabTopdec$1$9.map_Some_on_3nd$5481 = function(v$8431,v$8432,v$8433){return [v$8431,v$8432,[0,v$8433]];
};
basics$0ElabTopdec$1$9.elab_X_opt$5490 = function(v$8434,v$8435,v$8436){return function(v$5496){return function(v$5499){switch (v$8436[0]) { case 0: {var v$5518 = v$8436[1];
var v$7641 = v$5496([v$8434,v$8435,v$5518]);
return [v$7641[0],[0,v$7641[1]]];
 break; }default: {return [v$5499,[1]];
} };
};
};
};
basics$0ElabTopdec$1$9.elab_X_opt$$5525 = function(v$8437,v$8438){return function(v$5531){return function(v$5534){return function(v$5537){switch (v$8438[0]) { case 0: {var v$5555 = v$8438[1];
var v$7642 = v$5531([v$8437,v$5555]);
return [v$7642[0],v$7642[1],[0,v$7642[2]]];
 break; }default: {return [v$5534,v$5537,[1]];
} };
};
};
};
};
basics$0ElabTopdec$1$9.elab_X_opt$$$5563 = function(v$8439,v$8440,v$8441){return function(v$5569){return function(v$5572){switch (v$8440[0]) { case 0: {var v$5590 = v$8440[1];
var v$7643 = v$5569([v$8439,v$5590,v$8441]);
return [v$7643[0],[0,v$7643[1]],v$7643[2]];
 break; }default: {return [v$5572,[1],v$8441];
} };
};
};
};
basics$0ElabTopdec$1$9.Phi_match_via$5598 = function(a$5601){return basics$0ModuleStatObject$1.match_via$885(a$5601[0],a$5601[1]);
};
basics$0ElabTopdec$1$9.Sigma_to_T_and_E$5602 = function(a$5605){return basics$0ModuleStatObject$1.to_T_and_E$527(a$5605);
};
basics$0ElabTopdec$1$9.VE_close$5606 = function(a$5609){return basics$0Environments$1.close$1400(a$5609);
};
basics$0ElabTopdec$1$9.maximise_equality_in_VE_and_TE$5610 = function(a$5613){return basics$0Environments$1.maximise_equality_in_VE_and_TE$3895(a$5613[0],a$5613[1]);
};
basics$0ElabTopdec$1$9.lookup_longstrid$5614 = function(a$5617){return basics$0ModuleEnvironments$1.lookup_longstrid$573(a$5617);
};
basics$0ElabTopdec$1$9.lookup_funid$5618 = function(a$5621){return basics$0ModuleEnvironments$1.lookup_funid$646(a$5621);
};
basics$0ElabTopdec$1$9.lookup_sigid$5622 = function(a$5625){return basics$0ModuleEnvironments$1.lookup_sigid$610(a$5625);
};
basics$0ElabTopdec$1$9.lookup_longtycon$5626 = function(a$5629){return function(v$8449){return basics$0Environments$1.lookup_longtycon$2565(a$5629,v$8449);
};
};
basics$0ElabTopdec$1$9.lookup_longtycon$$5630 = function(a$5633){return basics$0ModuleEnvironments$1.lookup_longtycon$574(a$5633);
};
basics$0ElabTopdec$1$9.lookup_longstrid$$5634 = function(a$5637){return function(v$8451){return basics$0Environments$1.lookup_longstrid$2572(a$5637,v$8451);
};
};
basics$0ElabTopdec$1$9.lookup_tycon$5638 = function(a$5641){return basics$0Environments$1.lookup_tycon$3421(a$5641);
};
basics$0ElabTopdec$1$9.out_i_for_exdesc$5648 = function(excon$7209,VE$7212,i$7215,error$7218){if (error$7218) {return basics$0ElabTopdec$1$1.repeatedIdsError$243(i$7215,[[8,excon$7209],null]);
} else {if (basics$0PreElabDecGrammar$1$2.is_$true$_$nil$_etc$1860(excon$7209)) {return basics$0ElabTopdec$1$1.errorConv$229(i$7215,[17,[excon$7209,null]]);
} else {if (basics$0PreElabDecGrammar$1$2.is_$it$$1880(excon$7209)) {return basics$0ElabTopdec$1$1.errorConv$229(i$7215,[18]);
} else {return basics$0ElabTopdec$1$1.okConv$228(i$7215);
};
};
};
};
var fix$8472 = {};
fix$8472.$elab_exdesc = function(v$7204,v$7205,v$7206){var v$7136 = v$7205[1];
var v$7137 = v$7136[2];
switch (v$7137[0]) { case 1: {var v$7152 = v$7136[0];
var v$7153 = v$7136[1];
var v$7154 = v$7136[3];
var v$7149 = basics$0ElabTopdec$1$8.add_ids_vid$5423(v$7206,v$7153);
var v$7150 = v$7149[0];
var v$7151 = v$7149[1];
var v$7145;
switch (v$7154[0]) { case 0: {var v$7651 = v$7154[1];
var v$7654 = fix$8472.$elab_exdesc(v$7204,v$7651,v$7151);
v$7145 = [v$7654[0],[0,v$7654[1]],v$7654[2]];
 break; }default: {v$7145 = [basics$0Environments$1.empty$1052,[1],v$7151];
} };
var v$7146 = v$7145[0];
var v$7147 = v$7145[1];
var v$7148 = v$7145[2];
return [basics$0Environments$1.plus$1101(basics$0Environments$1.singleton_excon$1074(v$7153,basics$0StatObject$1.Exn$2084),v$7146),[0,[v$7150?(basics$0ElabTopdec$1$1.repeatedIdsError$243(v$7152,[[8,v$7153],null])):((basics$0PreElabDecGrammar$1$2.is_$true$_$nil$_etc$1860(v$7153))?(basics$0ElabTopdec$1$1.errorConv$229(v$7152,[17,[v$7153,null]])):((basics$0PreElabDecGrammar$1$2.is_$it$$1880(v$7153))?(basics$0ElabTopdec$1$1.errorConv$229(v$7152,[18])):(basics$0ElabTopdec$1$1.okConv$228(v$7152)))),v$7153,[1],v$7147]],v$7148];
 break; }default: {var v$7200 = v$7136[0];
var v$7201 = v$7136[1];
var v$7202 = v$7137[1];
var v$7203 = v$7136[3];
var v$7197 = basics$0ElabTopdec$1$8.add_ids_vid$5423(v$7206,v$7201);
var v$7198 = v$7197[0];
var v$7199 = v$7197[1];
var v$7193;
switch (v$7203[0]) { case 0: {var v$7666 = v$7203[1];
var v$7669 = fix$8472.$elab_exdesc(v$7204,v$7666,v$7199);
v$7193 = [v$7669[0],[0,v$7669[1]],v$7669[2]];
 break; }default: {v$7193 = [basics$0Environments$1.empty$1052,[1],v$7199];
} };
var v$7194 = v$7193[0];
var v$7195 = v$7193[1];
var v$7196 = v$7193[2];
var v$7178 = basics$0ElabDec$1.elab_ty$807(v$7204,v$7202);
var v$7179 = v$7178[0];
switch (v$7179[0]) { case 0: {var v$7189 = v$7179[1];
var v$7190 = v$7178[1];
var tyvars$7181 = basics$0ElabTopdec$1$1.tyvars_Type$216(v$7189);
var arrow$7182 = basics$0StatObject$1.mk_Arrow$2104(v$7189,basics$0StatObject$1.Exn$2084);
var out_i$7183 = (tyvars$7181 == null)?(v$7198?(basics$0ElabTopdec$1$1.repeatedIdsError$243(v$7200,[[8,v$7201],null])):((basics$0PreElabDecGrammar$1$2.is_$true$_$nil$_etc$1860(v$7201))?(basics$0ElabTopdec$1$1.errorConv$229(v$7200,[17,[v$7201,null]])):((basics$0PreElabDecGrammar$1$2.is_$it$$1880(v$7201))?(basics$0ElabTopdec$1$1.errorConv$229(v$7200,[18])):(basics$0ElabTopdec$1$1.okConv$228(v$7200))))):(basics$0ElabTopdec$1$1.errorConv$229(v$7200,[38]));
return [basics$0Environments$1.plus$1101(basics$0Environments$1.singleton_excon$1074(v$7201,arrow$7182),v$7194),[0,[out_i$7183,v$7201,[0,v$7190],v$7195]],v$7196];
 break; }default: {var v$7192 = v$7178[1];
return [v$7194,[0,[v$7198?(basics$0ElabTopdec$1$1.repeatedIdsError$243(v$7200,[[8,v$7201],null])):((basics$0PreElabDecGrammar$1$2.is_$true$_$nil$_etc$1860(v$7201))?(basics$0ElabTopdec$1$1.errorConv$229(v$7200,[17,[v$7201,null]])):((basics$0PreElabDecGrammar$1$2.is_$it$$1880(v$7201))?(basics$0ElabTopdec$1$1.errorConv$229(v$7200,[18])):(basics$0ElabTopdec$1$1.okConv$228(v$7200)))),v$7201,[0,v$7192],v$7195]],v$7196];
} };
} };
};
basics$0ElabTopdec$1$9.elab_exdesc$5649 = fix$8472.$elab_exdesc;
basics$0ElabTopdec$1$9.out_i_for_condesc$5651 = function(con$7080,constructor_map$7083,i$7086,error$7089){if (error$7089) {return basics$0ElabTopdec$1$1.repeatedIdsError$243(i$7086,[[9,con$7080],null]);
} else {if (basics$0PreElabDecGrammar$1$2.is_$true$_$nil$_etc$1860(con$7080)) {return basics$0ElabTopdec$1$1.errorConv$229(i$7086,[17,[con$7080,null]]);
} else {if (basics$0PreElabDecGrammar$1$2.is_$it$$1880(con$7080)) {return basics$0ElabTopdec$1$1.errorConv$229(i$7086,[18]);
} else {return basics$0ElabTopdec$1$1.okConv$228(i$7086);
};
};
};
};
var fix$8473 = {};
fix$8473.$elab_condesc = function(v$7074,v$7075,v$7076,v$7077){var v$7014 = v$7076[1];
var v$7015 = v$7014[2];
switch (v$7015[0]) { case 1: {var v$7031 = v$7014[0];
var v$7032 = v$7014[1];
var v$7033 = v$7014[3];
var sigma$7016 = [null,v$7075];
var v$7028 = basics$0ElabTopdec$1$8.add_ids_vid$5423(v$7077,v$7032);
var v$7029 = v$7028[0];
var v$7030 = v$7028[1];
var v$7024 = fix$8473.$elab_condesc_opt(v$7074,v$7075,v$7033,v$7030);
var v$7025 = v$7024[0];
var v$7026 = v$7024[1];
var v$7027 = v$7024[2];
return [basics$0Environments$1.add$3708(function(v$8442){return syntax_objects$0Ident$1.eq_id$248(v$8442[0],v$8442[1]);
},v$7032,sigma$7016,v$7025),[0,[v$7029?(basics$0ElabTopdec$1$1.repeatedIdsError$243(v$7031,[[9,v$7032],null])):((basics$0PreElabDecGrammar$1$2.is_$true$_$nil$_etc$1860(v$7032))?(basics$0ElabTopdec$1$1.errorConv$229(v$7031,[17,[v$7032,null]])):((basics$0PreElabDecGrammar$1$2.is_$it$$1880(v$7032))?(basics$0ElabTopdec$1$1.errorConv$229(v$7031,[18])):(basics$0ElabTopdec$1$1.okConv$228(v$7031)))),v$7032,[1],v$7026]],v$7027];
 break; }default: {var v$7070 = v$7014[0];
var v$7071 = v$7014[1];
var v$7072 = v$7015[1];
var v$7073 = v$7014[3];
var v$7067 = basics$0ElabTopdec$1$8.add_ids_vid$5423(v$7077,v$7071);
var v$7068 = v$7067[0];
var v$7069 = v$7067[1];
var v$7063 = fix$8473.$elab_condesc_opt(v$7074,v$7075,v$7073,v$7069);
var v$7064 = v$7063[0];
var v$7065 = v$7063[1];
var v$7066 = v$7063[2];
var v$7054 = basics$0ElabDec$1.elab_ty$807(v$7074,v$7072);
var v$7055 = v$7054[0];
switch (v$7055[0]) { case 0: {var v$7060 = v$7055[1];
var v$7061 = v$7054[1];
var arrow$7057 = basics$0StatObject$1.mk_Arrow$2104(v$7060,v$7075);
var sigma$7058 = [null,arrow$7057];
return [basics$0Environments$1.add$3708(function(v$8443){return syntax_objects$0Ident$1.eq_id$248(v$8443[0],v$8443[1]);
},v$7071,sigma$7058,v$7064),[0,[v$7068?(basics$0ElabTopdec$1$1.repeatedIdsError$243(v$7070,[[9,v$7071],null])):((basics$0PreElabDecGrammar$1$2.is_$true$_$nil$_etc$1860(v$7071))?(basics$0ElabTopdec$1$1.errorConv$229(v$7070,[17,[v$7071,null]])):((basics$0PreElabDecGrammar$1$2.is_$it$$1880(v$7071))?(basics$0ElabTopdec$1$1.errorConv$229(v$7070,[18])):(basics$0ElabTopdec$1$1.okConv$228(v$7070)))),v$7071,[0,v$7061],v$7065]],v$7066];
 break; }default: {var v$7062 = v$7054[1];
return [v$7064,[0,[v$7068?(basics$0ElabTopdec$1$1.repeatedIdsError$243(v$7070,[[9,v$7071],null])):((basics$0PreElabDecGrammar$1$2.is_$true$_$nil$_etc$1860(v$7071))?(basics$0ElabTopdec$1$1.errorConv$229(v$7070,[17,[v$7071,null]])):((basics$0PreElabDecGrammar$1$2.is_$it$$1880(v$7071))?(basics$0ElabTopdec$1$1.errorConv$229(v$7070,[18])):(basics$0ElabTopdec$1$1.okConv$228(v$7070)))),v$7071,[0,v$7062],v$7065]],v$7066];
} };
} };
};
fix$8473.$elab_condesc_opt = function(v$7116,v$7117,v$7118,v$7119){switch (v$7118[0]) { case 0: {var v$7691 = v$7118[1];
var v$7694 = fix$8473.$elab_condesc(v$7116,v$7117,v$7691,v$7119);
return [v$7694[0],[0,v$7694[1]],v$7694[2]];
 break; }default: {return [basics$0Environments$1.empty$3707,[1],v$7119];
} };
};
basics$0ElabTopdec$1$9.elab_condesc$5652 = fix$8473.$elab_condesc;
basics$0ElabTopdec$1$9.elab_condesc_opt$5650 = fix$8473.$elab_condesc_opt;
var fix$8474 = {};
fix$8474.$elab_datdesc = function(v$6994,v$6995,v$6996){var v$6988 = v$6995[1];
var v$6989 = v$6988[0];
var v$6990 = v$6988[1];
var v$6991 = v$6988[2];
var v$6992 = v$6988[3];
var v$6993 = v$6988[4];
basics$0StatObject$1.push$152(0);
var v$6985 = basics$0Environments$1.plus_U$$3237(v$6994,v$6990);
var v$6986 = v$6985[0];
var v$6987 = v$6985[1];
var v$6983 = basics$0Environments$1.to_theta_and_VE$1680(basics$0ElabTopdec$1$1.noSome$66((basics$0Environments$1.lookup_tycon$3421(v$6994))(v$6991),"datdesc(1)"));
var v$6984 = v$6983[0];
var t$6924 = basics$0ElabTopdec$1$1.noSome$66(basics$0StatObject$1.to_TyName$4079(v$6984),"datdesc(2)");
var taus$6925 = basis$0List$1.map$697(function(v$8460){return basics$0StatObject$1.from_TyVar$1518(v$8460);
},v$6986);
var tau$6926 = basics$0StatObject$1.mk_ConsType$2059(taus$6925,t$6924);
var v$6979 = basics$0ElabTopdec$1$9.elab_condesc$5652(v$6987,tau$6926,v$6992,v$6996);
var v$6980 = v$6979[0];
var v$6981 = v$6979[1];
var v$6982 = v$6979[2];
var VE$6931 = basics$0Environments$1.to_VE$3725(v$6980);
var tyvars_repeated$6932 = basics$0ElabTopdec$1$1.repeaters$250(function(v$7720){var v$7721 = v$7720[0];
var v$7722 = v$7720[1];
return syntax_objects$0SyntaxTyVar$1.eq_SyntaxTyVar$125(v$7721,v$7722);
},v$6990);
var tyvars_not_bound$6933 = basis$0List$1.filter$417(function(tyvar$6936){var t$8551;
var fix$8549 = {};
fix$8549.$exists = function(v$7728){lab$exists: while (true) {if (v$7728 == null) {return false;
} else {var v$7729 = v$7728;
var v$7730 = v$7729[0];
var v$7731 = v$7729[1];
if (syntax_objects$0SyntaxTyVar$1.eq_SyntaxTyVar$125(tyvar$6936,v$7730)) {return true;
} else {var t$8550 = v$7731;
var v$7728 = t$8550;
continue lab$exists;
};
};
};
};
var exists$7727 = fix$8549.$exists;
t$8551 = (exists$7727(v$6990));
return t$8551?false:true;
},basics$0PreElabTopdecGrammar$1$1.getExplicitTyVarsCondesc$803(v$6992));
basics$0StatObject$1.pop$155(0);
var VE_closed$6937 = basics$0Environments$1.close$1400(VE$6931);
var theta$6938 = basics$0StatObject$1.from_TyName$4059(t$6924);
var tystr$6939 = basics$0Environments$1.from_theta_and_VE$1671(theta$6938,VE_closed$6937);
var v$6976 = basics$0ElabTopdec$1$8.add_ids_tycon$5410(v$6982,v$6991);
var v$6977 = v$6976[0];
var v$6978 = v$6976[1];
var v$6970;
var v$7734 = [basics$0Environments$1.empty$1052,basics$0Environments$1.empty$1786];
switch (v$6993[0]) { case 0: {var v$7739 = v$6993[1];
var v$7742 = fix$8474.$elab_datdesc(v$6994,v$7739,v$6978);
v$6970 = [v$7742[0],[0,v$7742[1]],v$7742[2]];
 break; }default: {v$6970 = [v$7734,[1],v$6978];
} };
var v$6971 = v$6970[0];
var v$6972 = v$6971[0];
var v$6973 = v$6971[1];
var v$6974 = v$6970[1];
var v$6975 = v$6970[2];
var v$6952 = basics$0ElabTopdec$1$1.s$n$200([v$6977?[[1,v$6991],null]:null,basis$0List$1.map$697(function(v$6969){return [0,v$6969];
},basis$0List$1.map$697(function(v$8461){return basics$0StatObject$1.from_ExplicitTyVar$629(v$8461);
},tyvars_repeated$6932))]);
return (v$6952 == null)?((tyvars_not_bound$6933 == null)?[[basics$0Environments$1.plus$1101(VE_closed$6937,v$6972),basics$0Environments$1.plus$1790(basics$0Environments$1.singleton$1788([v$6991,tystr$6939]),v$6973)],[0,[(syntax_objects$0TyCon$1.is_$true$_$nil$_etc$171(v$6991))?(basics$0ElabTopdec$1$1.errorConv$229(v$6989,[17,null])):((syntax_objects$0TyCon$1.is_$it$$188(v$6991))?(basics$0ElabTopdec$1$1.errorConv$229(v$6989,[18])):(basics$0ElabTopdec$1$1.okConv$228(v$6989))),v$6990,v$6991,v$6981,v$6974]],v$6975]:[[v$6972,v$6973],[0,[basics$0ElabTopdec$1$1.errorConv$229(v$6989,[15,basis$0List$1.map$697(function(v$8462){return syntax_objects$0SyntaxTyVar$1.pr_tyvar$60(v$8462);
},tyvars_not_bound$6933)]),v$6990,v$6991,v$6981,v$6974]],v$6975]):[[v$6972,v$6973],[0,[basics$0ElabTopdec$1$1.repeatedIdsError$243(v$6989,v$6952),v$6990,v$6991,v$6981,v$6974]],v$6975];
};
basics$0ElabTopdec$1$9.elab_datdesc$5653 = fix$8474.$elab_datdesc;
var fix$8475 = {};
fix$8475.$elab_typdesc = function(equality$6836,v$6841){var v$6904 = v$6841[0];
var v$6905 = v$6841[1];
var v$6906 = v$6841[2];
var v$6899 = v$6905[1];
var v$6900 = v$6899[0];
var v$6901 = v$6899[1];
var v$6902 = v$6899[2];
var v$6903 = v$6899[3];
basis$0List$1.map$697(function(v$8463){return basics$0StatObject$1.from_ExplicitTyVar$629(v$8463);
},v$6901);
var tyvars_repeated$6849 = basics$0ElabTopdec$1$1.repeaters$250(function(v$7744){var v$7745 = v$7744[0];
var v$7746 = v$7744[1];
return syntax_objects$0SyntaxTyVar$1.eq_SyntaxTyVar$125(v$7745,v$7746);
},v$6901);
var arity$6850;
var fix$8546 = {};
fix$8546.$acc = function(v$7749,v$7750){lab$acc: while (true) {if (v$7749 == null) {return v$7750;
} else {var v$7751 = v$7749;
var v$7752 = v$7751[1];
var t$8547 = v$7752;
var t$8548 = SmlPrims.chk_ovf_i32(v$7750 + 1);
var v$7749 = t$8547;
var v$7750 = t$8548;
continue lab$acc;
};
};
};
var acc$7748 = fix$8546.$acc;
arity$6850 = (acc$7748(v$6901,0));
var t$6851 = special_objects$0TyName$1$1.freshTyName$142(arity$6850,equality$6836,v$6902);
var theta$6855 = basics$0StatObject$1.from_TyName$4059(t$6851);
var tystr$6856 = basics$0Environments$1.from_theta_and_VE$1671(theta$6855,basics$0Environments$1.empty$1052);
var v$6896 = basics$0ElabTopdec$1$8.add_ids_tycon$5410(v$6906,v$6902);
var v$6897 = v$6896[0];
var v$6898 = v$6896[1];
var v$6875;
switch (v$6903[0]) { case 1: {v$6875 = [null,basics$0Environments$1.empty$1786,[1],v$6898];
 break; }default: {var v$6895 = v$6903[1];
var v$6890 = fix$8475.$elab_typdesc(equality$6836,[v$6904,v$6895,v$6898]);
v$6875 = [v$6890[0],v$6890[1],[0,v$6890[2]],v$6890[3]];
} };
var v$6876 = v$6875[0];
var v$6877 = v$6875[1];
var v$6878 = v$6875[2];
var v$6879 = v$6875[3];
var out_i$6865 = v$6897?(basics$0ElabTopdec$1$1.repeatedIdsError$243(v$6900,[[1,v$6902],null])):((tyvars_repeated$6849 == null)?(basics$0ElabTopdec$1$1.okConv$228(v$6900)):(basics$0ElabTopdec$1$1.repeatedIdsError$243(v$6900,basis$0List$1.map$697(function(v$6874){return [0,v$6874];
},basis$0List$1.map$697(function(v$8464){return basics$0StatObject$1.from_ExplicitTyVar$629(v$8464);
},tyvars_repeated$6849)))));
return [[t$6851,v$6876],basics$0Environments$1.plus$1790(basics$0Environments$1.singleton$1788([v$6902,tystr$6856]),v$6877),[0,[out_i$6865,v$6901,v$6902,v$6878]],v$6879];
};
basics$0ElabTopdec$1$9.elab_typdesc$5654 = fix$8475.$elab_typdesc;
var fix$8476 = {};
fix$8476.$elab_valdesc = function(v$6831,v$6832,v$6833){var v$6826 = v$6832[1];
var v$6827 = v$6826[0];
var v$6828 = v$6826[1];
var v$6829 = v$6826[2];
var v$6830 = v$6826[3];
var v$6823 = basics$0ElabTopdec$1$8.add_ids_vid$5423(v$6833,v$6828);
var v$6824 = v$6823[0];
var v$6825 = v$6823[1];
var explicittyvars$6785 = edlib$0EqSet$1.list$107(basics$0Environments$1.ExplicitTyVarsTy$188(v$6829));
var C$$6786 = basics$0Environments$1.plus_U$3271([v$6831,explicittyvars$6785]);
var out_i$6787 = v$6824?(basics$0ElabTopdec$1$1.repeatedIdsError$243(v$6827,[[6,v$6828],null])):((basics$0PreElabDecGrammar$1$2.is_$true$_$nil$_etc$1860(v$6828))?(basics$0ElabTopdec$1$1.errorConv$229(v$6827,[17,[v$6828,null]])):(basics$0ElabTopdec$1$1.okConv$228(v$6827)));
var v$8162 = basics$0ElabDec$1.elab_ty$807(C$$6786,v$6829);
var v$8163;
switch (v$6830[0]) { case 0: {var v$7760 = v$6830[1];
var v$7763 = fix$8476.$elab_valdesc(v$6831,v$7760,v$6825);
v$8163 = [v$7763[0],[0,v$7763[1]],v$7763[2]];
 break; }default: {v$8163 = [basics$0Environments$1.empty$1052,[1],v$6825];
} };
var v$6810 = v$8162[0];
switch (v$6810[0]) { case 0: {var v$6812 = v$6810[1];
var v$6813 = v$8162[1];
var v$6815 = v$8163[0];
var v$6816 = v$8163[1];
var v$6817 = v$8163[2];
return [basics$0Environments$1.plus$1101(basics$0Environments$1.singleton_var$1058(v$6828,[null,v$6812]),v$6815),[0,[out_i$6787,v$6828,v$6813,v$6816]],v$6817];
 break; }default: {return [v$8163[0],[0,[out_i$6787,v$6828,v$8162[1],v$8163[1]]],v$8163[2]];
} };
};
basics$0ElabTopdec$1$9.elab_valdesc$5655 = fix$8476.$elab_valdesc;
var fix$8477 = {};
fix$8477.$elab_spec = function(v$6768,v$6769,v$6770){switch (v$6769[0]) { case 0: {var v$6703 = v$6769[1];
var v$6704 = v$6703[0];
var v$6705 = v$6703[1];
basics$0StatObject$1.push$152(0);
var v$6699 = basics$0ElabTopdec$1$9.elab_valdesc$5655(basics$0ModuleEnvironments$1.to_C$506(v$6768),v$6705,v$6770);
var v$6700 = v$6699[0];
var v$6701 = v$6699[1];
var v$6702 = v$6699[2];
basics$0StatObject$1.pop$155(0);
return [null,basics$0Environments$1.from_VE$2390(basics$0Environments$1.close$1400(v$6700)),[0,[basics$0ElabTopdec$1$1.okConv$228(v$6704),v$6701]],v$6702];
 break; }case 1: {var v$6691 = v$6769[1];
var v$6692 = v$6691[0];
var v$6693 = v$6691[1];
var v$6686;
var fix$8530 = {};
fix$8530.$elab_typdesc = function(v$8357,v$8358,v$8359){var v$8360 = v$8358[1];
var v$8361 = v$8360[0];
var v$8362 = v$8360[1];
var v$8363 = v$8360[2];
var v$8364 = v$8360[3];
basis$0List$1.map$697(function(v$8465){return basics$0StatObject$1.from_ExplicitTyVar$629(v$8465);
},v$8362);
var tyvars_repeated$8365 = basics$0ElabTopdec$1$1.repeaters$250(function(v$8366){var v$8367 = v$8366[0];
var v$8368 = v$8366[1];
return syntax_objects$0SyntaxTyVar$1.eq_SyntaxTyVar$125(v$8367,v$8368);
},v$8362);
var arity$8369;
var fix$8531 = {};
fix$8531.$acc = function(v$8371,v$8372){lab$acc: while (true) {if (v$8371 == null) {return v$8372;
} else {var v$8373 = v$8371;
var v$8374 = v$8373[1];
var t$8532 = v$8374;
var t$8533 = SmlPrims.chk_ovf_i32(v$8372 + 1);
var v$8371 = t$8532;
var v$8372 = t$8533;
continue lab$acc;
};
};
};
var acc$8370 = fix$8531.$acc;
arity$8369 = (acc$8370(v$8362,0));
var t$8375 = special_objects$0TyName$1$1.freshTyName$142(arity$8369,false,v$8363);
var theta$8376 = basics$0StatObject$1.from_TyName$4059(t$8375);
var tystr$8377 = basics$0Environments$1.from_theta_and_VE$1671(theta$8376,basics$0Environments$1.empty$1052);
var v$8378 = basics$0ElabTopdec$1$8.add_ids_tycon$5410(v$8359,v$8363);
var v$8379 = v$8378[0];
var v$8380 = v$8378[1];
var v$8381;
switch (v$8364[0]) { case 1: {v$8381 = [null,basics$0Environments$1.empty$1786,[1],v$8380];
 break; }default: {var v$8382 = v$8364[1];
var v$8383 = fix$8530.$elab_typdesc(v$8357,v$8382,v$8380);
v$8381 = [v$8383[0],v$8383[1],[0,v$8383[2]],v$8383[3]];
} };
var v$8384 = v$8381[0];
var v$8385 = v$8381[1];
var v$8386 = v$8381[2];
var v$8387 = v$8381[3];
var out_i$8388 = v$8379?(basics$0ElabTopdec$1$1.repeatedIdsError$243(v$8361,[[1,v$8363],null])):((tyvars_repeated$8365 == null)?(basics$0ElabTopdec$1$1.okConv$228(v$8361)):(basics$0ElabTopdec$1$1.repeatedIdsError$243(v$8361,basis$0List$1.map$697(function(v$8389){return [0,v$8389];
},basis$0List$1.map$697(function(v$8466){return basics$0StatObject$1.from_ExplicitTyVar$629(v$8466);
},tyvars_repeated$8365)))));
return [[t$8375,v$8384],basics$0Environments$1.plus$1790(basics$0Environments$1.singleton$1788([v$8363,tystr$8377]),v$8385),[0,[out_i$8388,v$8362,v$8363,v$8386]],v$8387];
};
var elab_typdesc$8355 = fix$8530.$elab_typdesc;
v$6686 = (elab_typdesc$8355(basics$0ModuleEnvironments$1.to_C$506(v$6768),v$6693,v$6770));
var v$6687 = v$6686[0];
var v$6688 = v$6686[1];
var v$6689 = v$6686[2];
var v$6690 = v$6686[3];
return [v$6687,basics$0Environments$1.from_TE$2407(v$6688),[1,[basics$0ElabTopdec$1$1.okConv$228(v$6692),v$6689]],v$6690];
 break; }case 8: {var v$6677 = v$6769[1];
var v$6678 = v$6677[0];
var v$6679 = v$6677[1];
var v$6672;
var fix$8526 = {};
fix$8526.$elab_typdesc = function(v$8393,v$8394,v$8395){var v$8396 = v$8394[1];
var v$8397 = v$8396[0];
var v$8398 = v$8396[1];
var v$8399 = v$8396[2];
var v$8400 = v$8396[3];
basis$0List$1.map$697(function(v$8467){return basics$0StatObject$1.from_ExplicitTyVar$629(v$8467);
},v$8398);
var tyvars_repeated$8401 = basics$0ElabTopdec$1$1.repeaters$250(function(v$8402){var v$8403 = v$8402[0];
var v$8404 = v$8402[1];
return syntax_objects$0SyntaxTyVar$1.eq_SyntaxTyVar$125(v$8403,v$8404);
},v$8398);
var arity$8405;
var fix$8527 = {};
fix$8527.$acc = function(v$8407,v$8408){lab$acc: while (true) {if (v$8407 == null) {return v$8408;
} else {var v$8409 = v$8407;
var v$8410 = v$8409[1];
var t$8528 = v$8410;
var t$8529 = SmlPrims.chk_ovf_i32(v$8408 + 1);
var v$8407 = t$8528;
var v$8408 = t$8529;
continue lab$acc;
};
};
};
var acc$8406 = fix$8527.$acc;
arity$8405 = (acc$8406(v$8398,0));
var t$8411 = special_objects$0TyName$1$1.freshTyName$142(arity$8405,true,v$8399);
var theta$8412 = basics$0StatObject$1.from_TyName$4059(t$8411);
var tystr$8413 = basics$0Environments$1.from_theta_and_VE$1671(theta$8412,basics$0Environments$1.empty$1052);
var v$8414 = basics$0ElabTopdec$1$8.add_ids_tycon$5410(v$8395,v$8399);
var v$8415 = v$8414[0];
var v$8416 = v$8414[1];
var v$8417;
switch (v$8400[0]) { case 1: {v$8417 = [null,basics$0Environments$1.empty$1786,[1],v$8416];
 break; }default: {var v$8418 = v$8400[1];
var v$8419 = fix$8526.$elab_typdesc(v$8393,v$8418,v$8416);
v$8417 = [v$8419[0],v$8419[1],[0,v$8419[2]],v$8419[3]];
} };
var v$8420 = v$8417[0];
var v$8421 = v$8417[1];
var v$8422 = v$8417[2];
var v$8423 = v$8417[3];
var out_i$8424 = v$8415?(basics$0ElabTopdec$1$1.repeatedIdsError$243(v$8397,[[1,v$8399],null])):((tyvars_repeated$8401 == null)?(basics$0ElabTopdec$1$1.okConv$228(v$8397)):(basics$0ElabTopdec$1$1.repeatedIdsError$243(v$8397,basis$0List$1.map$697(function(v$8425){return [0,v$8425];
},basis$0List$1.map$697(function(v$8468){return basics$0StatObject$1.from_ExplicitTyVar$629(v$8468);
},tyvars_repeated$8401)))));
return [[t$8411,v$8420],basics$0Environments$1.plus$1790(basics$0Environments$1.singleton$1788([v$8399,tystr$8413]),v$8421),[0,[out_i$8424,v$8398,v$8399,v$8422]],v$8423];
};
var elab_typdesc$8391 = fix$8526.$elab_typdesc;
v$6672 = (elab_typdesc$8391(basics$0ModuleEnvironments$1.to_C$506(v$6768),v$6679,v$6770));
var v$6673 = v$6672[0];
var v$6674 = v$6672[1];
var v$6675 = v$6672[2];
var v$6676 = v$6672[3];
return [v$6673,basics$0Environments$1.from_TE$2407(v$6674),[8,[basics$0ElabTopdec$1$1.okConv$228(v$6678),v$6675]],v$6676];
 break; }case 10: {var v$6663 = v$6769[1];
var v$6664 = v$6663[0];
var v$6665 = v$6663[1];
var TE$6631 = basics$0ElabTopdec$1$1.initial_TE$337(v$6665);
var v$6657 = basics$0ElabTopdec$1$9.elab_datdesc$5653(basics$0Environments$1.plus_TE$3350(basics$0ModuleEnvironments$1.to_C$506(v$6768),TE$6631),v$6665,v$6770);
var v$6658 = v$6657[0];
var v$6659 = v$6658[0];
var v$6660 = v$6658[1];
var v$6661 = v$6657[1];
var v$6662 = v$6657[2];
var v$6654 = basics$0Environments$1.maximise_equality_in_VE_and_TE$3895(v$6659,v$6660);
var v$6655 = v$6654[0];
var v$6656 = v$6654[1];
return [basics$0Environments$1.fold$1838(function(tystr$6643){return function(T$6646){var v$6651 = basics$0StatObject$1.to_TyName$4079(basics$0Environments$1.to_theta$1691(tystr$6643));
switch (v$6651[0]) { case 0: {return [v$6651[1],T$6646];
 break; }default: {return basics$0ElabTopdec$1$1.impossible$62("IG.DATATYPEspec.theta not tyname");
} };
};
},null,v$6656),basics$0Environments$1.from_VE_and_TE$2379(v$6655,v$6656),[10,[basics$0ElabTopdec$1$1.okConv$228(v$6664),v$6661]],v$6662];
 break; }case 11: {var v$6626 = v$6769[1];
var v$6627 = v$6626[0];
var v$6628 = v$6626[1];
var v$6629 = v$6626[2];
var v$6571 = (basics$0ModuleEnvironments$1.lookup_longtycon$574(v$6768))(v$6629);
switch (v$6571[0]) { case 0: {var v$6625 = v$6571[1];
var v$6622 = basics$0Environments$1.to_theta_and_VE$1680(v$6625);
var v$6624 = v$6622[1];
var TE$6576 = basics$0Environments$1.singleton$1788([v$6628,v$6625]);
var v$6610;
var v$6618 = basics$0ElabTopdec$1$8.add_ids_tycon$5410(v$6770,v$6628);
v$6610 = (v$6618[0]?[[[1,v$6628],null],v$6618[1]]:[null,v$6618[1]]);
var v$6611 = v$6610[0];
var v$6612 = v$6610[1];
var v$6588 = basics$0Environments$1.Fold$1315(function(v$6593){var v$6609 = v$6593[0];
return function(v$6597){var v$6607 = v$6597[0];
var v$6608 = v$6597[1];
var v$6603 = basics$0ElabTopdec$1$8.add_ids_vid$5423(v$6608,v$6609);
return v$6603[0]?[[[6,v$6609],v$6607],v$6603[1]]:[v$6607,v$6603[1]];
};
},[v$6611,v$6612],v$6624);
var v$6589 = v$6588[0];
var v$6590 = v$6588[1];
var out_i$6583 = (v$6589 == null)?(basics$0ElabTopdec$1$1.okConv$228(v$6627)):(basics$0ElabTopdec$1$1.repeatedIdsError$243(v$6627,v$6589));
return [null,basics$0Environments$1.from_VE_and_TE$2379(v$6624,TE$6576),[11,[out_i$6583,v$6628,v$6629]],v$6590];
 break; }default: {return [null,basics$0Environments$1.bogus$2606,[11,[basics$0ElabTopdec$1$1.errorConv$229(v$6627,[33,v$6629]),v$6628,v$6629]],v$6770];
} };
 break; }case 7: {var v$6563 = v$6769[1];
var v$6564 = v$6563[0];
var v$6565 = v$6563[1];
var v$6559 = basics$0ElabTopdec$1$9.elab_exdesc$5649(basics$0ModuleEnvironments$1.to_C$506(v$6768),v$6565,v$6770);
var v$6560 = v$6559[0];
var v$6561 = v$6559[1];
var v$6562 = v$6559[2];
return [null,basics$0Environments$1.from_VE$2390(v$6560),[7,[basics$0ElabTopdec$1$1.okConv$228(v$6564),v$6561]],v$6562];
 break; }case 2: {var v$6551 = v$6769[1];
var v$6552 = v$6551[0];
var v$6553 = v$6551[1];
var v$6546 = fix$8477.$elab_strdesc(v$6768,v$6553,v$6770);
var v$6547 = v$6546[0];
var v$6548 = v$6546[1];
var v$6549 = v$6546[2];
var v$6550 = v$6546[3];
return [v$6547,basics$0Environments$1.from_SE$2424(v$6548),[2,[basics$0ElabTopdec$1$1.okConv$228(v$6552),v$6549]],v$6550];
 break; }case 6: {var v$6537 = v$6769[1];
var v$6538 = v$6537[0];
var v$6539 = v$6537[1];
var v$6533 = fix$8477.$elab_sigexp$(v$6768,v$6539);
var v$6534 = v$6533[0];
var v$6535 = v$6533[1];
var v$6536 = v$6533[2];
var v$6530 = basics$0Environments$1.un$2351(v$6535);
var v$6531 = v$6530[0];
var v$6532 = v$6530[1];
var strids$6474 = edlib$0EqSet$1.list$107(basics$0Environments$1.dom$2162(v$6531));
var v$6509;
var fix$8518 = {};
fix$8518.$foldl = function(v$7840,v$7841){lab$foldl: while (true) {if (v$7841 == null) {return v$7840;
} else {var v$7842 = v$7841;
var v$7843 = v$7842[0];
var v$7844 = v$7842[1];
var t$8519;
var v$7848 = v$7840[0];
var v$7849 = v$7840[1];
var v$7850 = basics$0ElabTopdec$1$8.add_ids_strid$5397(v$7849,v$7843);
t$8519 = (v$7850[0]?[[[2,v$7843],v$7848],v$7850[1]]:[v$7848,v$7850[1]]);
var t$8520 = t$8519;
var t$8521 = v$7844;
var v$7840 = t$8520;
var v$7841 = t$8521;
continue lab$foldl;
};
};
};
var foldl$7839 = fix$8518.$foldl;
var v$8452 = [null,v$6770];
v$6509 = (foldl$7839(v$8452,strids$6474));
var v$6510 = v$6509[0];
var v$6511 = v$6509[1];
var tycons$6478 = edlib$0EqSet$1.list$107(basics$0Environments$1.dom$1816(v$6532));
var v$6488;
var fix$8522 = {};
fix$8522.$foldl = function(v$7867,v$7868){lab$foldl: while (true) {if (v$7868 == null) {return v$7867;
} else {var v$7869 = v$7868;
var v$7870 = v$7869[0];
var v$7871 = v$7869[1];
var t$8523;
var v$7875 = v$7867[0];
var v$7876 = v$7867[1];
var v$7877 = basics$0ElabTopdec$1$8.add_ids_tycon$5410(v$7876,v$7870);
t$8523 = (v$7877[0]?[[[1,v$7870],v$7875],v$7877[1]]:[v$7875,v$7877[1]]);
var t$8524 = t$8523;
var t$8525 = v$7871;
var v$7867 = t$8524;
var v$7868 = t$8525;
continue lab$foldl;
};
};
};
var foldl$7866 = fix$8522.$foldl;
var v$8454 = [v$6510,v$6511];
v$6488 = (foldl$7866(v$8454,tycons$6478));
var v$6489 = v$6488[0];
var v$6490 = v$6488[1];
var out_i$6482 = (v$6489 == null)?(basics$0ElabTopdec$1$1.okConv$228(v$6538)):(basics$0ElabTopdec$1$1.repeatedIdsError$243(v$6538,v$6489));
return [v$6534,v$6535,[6,[basics$0ElabInfo$1.plus_TypeInfo$128(out_i$6482,[11,[strids$6474,tycons$6478]]),v$6536]],v$6490];
 break; }case 9: {var v$6465 = v$6769[1];
return [null,basics$0Environments$1.empty$2601,[9,basics$0ElabTopdec$1$1.okConv$228(v$6465)],v$6770];
 break; }case 5: {var v$6460 = v$6769[1];
var v$6461 = v$6460[0];
var v$6462 = v$6460[1];
var v$6463 = v$6460[2];
var v$6455 = fix$8477.$elab_spec(v$6768,v$6462,v$6770);
var v$6456 = v$6455[0];
var v$6457 = v$6455[1];
var v$6458 = v$6455[2];
var v$6459 = v$6455[3];
var v$6450 = fix$8477.$elab_spec(basics$0ElabTopdec$1$1.B_plus_E$143(v$6768,v$6457),v$6463,v$6459);
var v$6451 = v$6450[0];
var v$6452 = v$6450[1];
var v$6453 = v$6450[2];
var v$6454 = v$6450[3];
var out_i$6449 = basics$0ElabTopdec$1$1.okConv$228(v$6461);
return [basics$0ElabTopdec$1$1.s$n$200([v$6456,v$6451]),basics$0Environments$1.plus$2441(v$6457,v$6452),[5,[out_i$6449,v$6458,v$6453]],v$6454];
 break; }case 4: {var v$6434 = v$6769[1];
var v$6435 = v$6434[0];
var v$6436 = v$6434[1];
var v$6437 = v$6434[2];
var v$6429 = fix$8477.$elab_spec(v$6768,v$6436,v$6770);
var v$6430 = v$6429[0];
var v$6431 = v$6429[1];
var v$6432 = v$6429[2];
var v$6433 = v$6429[3];
var v$6383;
var t$8503;
var v$8271 = [null,null,false];
var fix$8504 = {};
fix$8504.$foldr = function(v$8273){if (v$8273 == null) {return v$8271;
} else {var v$8274 = v$8273;
var v$8275 = v$8274[0];
var v$8276 = v$8274[1];
var v$8278 = fix$8504.$foldr(v$8276);
var v$8280 = v$8275[1];
var v$8281 = v$8280[0];
var v$8282 = v$8280[1];
var v$8284 = v$8278[0];
var v$8285 = v$8278[1];
var v$8286 = v$8278[2];
var v$8287;
var v$8288 = basics$0Environments$1.lookup_longtycon$2565(v$6431,v$8282);
switch (v$8288[0]) { case 0: {var v$8289 = v$8288[1];
var theta_i$8290 = basics$0Environments$1.to_theta$1691(v$8289);
var v$8291 = basics$0StatObject$1.to_TyName$4079(theta_i$8290);
switch (v$8291[0]) { case 0: {var v$8292 = v$8291[1];
v$8287 = (((special_objects$0TyName$1$3.member$2869(v$8292[0],v$8292[1],v$8292[2],v$8292[3],v$8292[4],v$8292[5]))(special_objects$0TyName$1$3.fromList$3273(v$6430)))?[[v$8292,v$8284],basics$0ElabTopdec$1$1.okConv$228(v$8281),v$8286]:[v$8284,basics$0ElabTopdec$1$1.errorConv$229(v$8281,[20,[v$8282,v$8292]]),true]);
 break; }default: {v$8287 = [v$8284,basics$0ElabTopdec$1$1.errorConv$229(v$8281,[21,[v$8282,theta_i$8290]]),true];
} };
 break; }default: {v$8287 = [v$8284,basics$0ElabTopdec$1$1.errorConv$229(v$8281,[33,v$8282]),true];
} };
return [v$8287[0],[[0,[v$8287[1],v$8282]],v$8285],v$8287[2]];
};
};
var foldr$8272 = fix$8504.$foldr;
t$8503 = (function(v$8469){return foldr$8272(v$8469);
});
v$6383 = (t$8503(v$6437));
var v$6384 = v$6383[0];
var v$6385 = v$6383[1];
if (v$6383[2]) {return [null,basics$0Environments$1.bogus$2606,[4,[basics$0ElabTopdec$1$1.okConv$228(v$6435),v$6432,v$6385]],v$6433];
} else {var T$6332 = special_objects$0TyName$1$3.list$3264(special_objects$0TyName$1$3.fromList$3273(v$6384));
var fix$8505 = {};
fix$8505.$find = function(v$6349,v$8444){lab$find: while (true) {if (v$6349 == null) {return basics$0ElabTopdec$1$1.impossible$62("IG.SHARING_TYPEspec.find");
} else {var v$6351 = v$6349;
var v$6352 = v$6351[1];
if (v$6352 == null) {return [v$6351[0],v$8444];
} else {var v$6359 = v$6351[0];
if (v$6359[1]) {return [v$6359,basics$0ElabTopdec$1$1.s$n$200([v$6352,v$8444])];
} else {var t$8506 = v$6352;
var t$8507 = [v$6359,v$8444];
var v$6349 = t$8506;
var v$8444 = t$8507;
continue lab$find;
};
};
};
};
};
var find$6333 = fix$8505.$find;
var v$6380 = find$6333(T$6332,null);
var v$6381 = v$6380[0];
var v$6382 = v$6380[1];
var arity$6364 = v$6381[0];
var T0$$6365;
var fix$8508 = {};
fix$8508.$all = function(v$7935){lab$all: while (true) {if (v$7935 == null) {return null;
} else {var v$7936 = v$7935;
var v$7937 = v$7936[0];
var v$7938 = v$7936[1];
var t$8513;
var t$8512;
var fix$8509 = {};
fix$8509.$exists = function(v$8295){lab$exists: while (true) {if (v$8295 == null) {return false;
} else {var v$8296 = v$8295;
var v$8297 = v$8296[0];
var v$8298 = v$8296[1];
var t$8510;
var v$8299 = v$7937[2];
var v$8300 = v$8297[2];
var v$8301 = v$8299[0][1];
var v$8302 = v$8300[0][1];
t$8510 = ((v$8301[0] == v$8302[0])?(v$8301[1] == v$8302[1]):false);
if (t$8510) {return true;
} else {var t$8511 = v$8298;
var v$8295 = t$8511;
continue lab$exists;
};
};
};
};
var exists$8294 = fix$8509.$exists;
t$8512 = (exists$8294(v$6382));
t$8513 = (t$8512?false:true);
if (t$8513) {return [v$7937,fix$8508.$all(v$7938)];
} else {var t$8514 = v$7938;
var v$7935 = t$8514;
continue lab$all;
};
};
};
};
var all$7934 = fix$8508.$all;
T0$$6365 = (all$7934(v$6430));
var t$8517;
var fix$8515 = {};
fix$8515.$all = function(v$7966){lab$all: while (true) {if (v$7966 == null) {return true;
} else {var v$7967 = v$7966;
var v$7968 = v$7967[0];
var v$7969 = v$7967[1];
if (v$7968[0] == arity$6364) {var t$8516 = v$7969;
var v$7966 = t$8516;
continue lab$all;
} else {return false;
};
};
};
};
var all$7965 = fix$8515.$all;
t$8517 = (all$7965(v$6382));
if (t$8517) {var phi$6376 = basics$0StatObject$1.from_T_and_tyname$4357(special_objects$0TyName$1$3.fromList$3273(v$6382),v$6381);
return [T0$$6365,basics$0Environments$1.on_Env$3796(phi$6376,v$6431),[4,[basics$0ElabTopdec$1$1.okConv$228(v$6435),v$6432,v$6385]],v$6433];
} else {return [T0$$6365,v$6431,[4,[basics$0ElabTopdec$1$1.errorConv$229(v$6435,[22,T$6332]),v$6432,v$6385]],v$6433];
};
};
 break; }default: {var v$6764 = v$6769[1];
var v$6765 = v$6764[0];
var v$6766 = v$6764[1];
var v$6767 = v$6764[2];
var v$6759 = fix$8477.$elab_spec(v$6768,v$6766,v$6770);
var v$6760 = v$6759[0];
var v$6761 = v$6759[1];
var v$6762 = v$6759[2];
var v$6763 = v$6759[3];
var v$6736;
var t$8534;
var v$8303 = [null,null];
var fix$8535 = {};
fix$8535.$foldr = function(v$8305){if (v$8305 == null) {return v$8303;
} else {var v$8306 = v$8305;
var v$8307 = v$8306[0];
var v$8308 = v$8306[1];
var v$8310 = fix$8535.$foldr(v$8308);
var v$8312 = v$8307[1];
var v$8313 = v$8312[0];
var v$8314 = v$8312[1];
var v$8316 = v$8310[0];
var v$8317 = v$8310[1];
var v$8318 = basics$0Environments$1.lookup_longstrid$2572(v$6761,v$8314);
switch (v$8318[0]) { case 0: {return [[v$8318[1],v$8316],[[0,[basics$0ElabTopdec$1$1.okConv$228(v$8313),v$8314]],v$8317]];
 break; }default: {return [v$8316,[[0,[basics$0ElabTopdec$1$1.errorConv$229(v$8313,[34,v$8314]),v$8314]],v$8317]];
} };
};
};
var foldr$8304 = fix$8535.$foldr;
t$8534 = (function(v$8470){return foldr$8304(v$8470);
});
v$6736 = (t$8534(v$6767));
var v$6737 = v$6736[0];
var v$6738 = v$6736[1];
var T0_set$6714 = special_objects$0TyName$1$3.fromList$3273(v$6760);
try {var v$6729 = basics$0ElabTopdec$1$1.share$738(function(t$8005){return (special_objects$0TyName$1$3.member$2869(t$8005[0],t$8005[1],t$8005[2],t$8005[3],t$8005[4],t$8005[5]))(T0_set$6714);
},v$6737);
var v$6730 = v$6729[0];
var v$6731 = v$6729[1];
var t$8544;
var fix$8537 = {};
fix$8537.$all = function(v$8008){lab$all: while (true) {if (v$8008 == null) {return null;
} else {var v$8009 = v$8008;
var v$8010 = v$8009[0];
var v$8011 = v$8009[1];
var t$8542;
var t$8541;
var fix$8538 = {};
fix$8538.$exists = function(v$8321){lab$exists: while (true) {if (v$8321 == null) {return false;
} else {var v$8322 = v$8321;
var v$8323 = v$8322[0];
var v$8324 = v$8322[1];
var t$8539;
var v$8325 = v$8010[2];
var v$8326 = v$8323[2];
var v$8327 = v$8325[0][1];
var v$8328 = v$8326[0][1];
t$8539 = ((v$8327[0] == v$8328[0])?(v$8327[1] == v$8328[1]):false);
if (t$8539) {return true;
} else {var t$8540 = v$8324;
var v$8321 = t$8540;
continue lab$exists;
};
};
};
};
var exists$8320 = fix$8538.$exists;
t$8541 = (exists$8320(v$6730));
t$8542 = (t$8541?false:true);
if (t$8542) {return [v$8010,fix$8537.$all(v$8011)];
} else {var t$8543 = v$8011;
var v$8008 = t$8543;
continue lab$all;
};
};
};
};
var all$8007 = fix$8537.$all;
t$8544 = (all$8007(v$6760));
return [t$8544,basics$0Environments$1.on_Env$3796(v$6731,v$6761),[3,[basics$0ElabTopdec$1$1.okConv$228(v$6765),v$6762,v$6738]],v$6763];
} catch(v$8536) {return (function(v$6735){var t$8545 = v$6735;
if (t$8545[0] == basics$0ElabTopdec$1$1.en$Share$426) {var error_info$6732 = v$6735[1];
return [v$6760,v$6761,[3,[basics$0ElabTopdec$1$1.errorConv$229(v$6765,error_info$6732),v$6762,v$6738]],v$6763];
} else {throw v$6735;
};
})(v$8536);
};
} };
};
fix$8477.$elab_sigexp$ = function(v$6175,v$6176){switch (v$6176[0]) { case 1: {var v$6078 = v$6176[1];
var v$6079 = v$6078[0];
var v$6080 = v$6078[1];
var v$6074 = fix$8477.$elab_spec(v$6175,v$6080,basics$0ElabTopdec$1$8.ids_empty$5396);
var v$6075 = v$6074[0];
var v$6076 = v$6074[1];
var v$6077 = v$6074[2];
return [v$6075,v$6076,[1,[basics$0ElabTopdec$1$1.okConv$228(v$6079),v$6077]]];
 break; }case 2: {var v$6066 = v$6176[1];
var v$6067 = v$6066[0];
var v$6068 = v$6066[1];
var v$6057 = (basics$0ModuleEnvironments$1.lookup_sigid$610(v$6175))(v$6068);
switch (v$6057[0]) { case 0: {var v$6065 = v$6057[1];
var v$6062 = basics$0ElabTopdec$1$1.Sigma_instance$$358(v$6065);
var v$6063 = v$6062[0];
var v$6064 = v$6062[1];
return [special_objects$0TyName$1$3.list$3264(v$6063),v$6064,[2,[basics$0ElabTopdec$1$1.okConv$228(v$6067),v$6068]]];
 break; }default: {return [null,basics$0Environments$1.bogus$2606,[2,[basics$0ElabTopdec$1$1.errorConv$229(v$6067,[32,v$6068]),v$6068]]];
} };
 break; }default: {var v$6169 = v$6176[1];
var v$6170 = v$6169[0];
var v$6171 = v$6169[1];
var v$6172 = v$6169[2];
var v$6173 = v$6169[3];
var v$6174 = v$6169[4];
var v$6165 = fix$8477.$elab_sigexp$(v$6175,v$6171);
var v$6166 = v$6165[0];
var v$6167 = v$6165[1];
var v$6168 = v$6165[2];
basics$0StatObject$1.push$152(0);
var v$6162 = basics$0Environments$1.plus_U$$3237(basics$0ModuleEnvironments$1.to_C$506(v$6175),v$6172);
var v$6163 = v$6162[0];
var v$6164 = v$6162[1];
var v$6112 = basics$0ElabDec$1.elab_ty$807(v$6164,v$6174);
var v$6113 = v$6112[0];
switch (v$6113[0]) { case 0: {var v$6159 = v$6113[1];
var v$6160 = v$6112[1];
basics$0StatObject$1.pop$155(0);
var v$6119 = basics$0Environments$1.lookup_longtycon$2565(v$6167,v$6173);
switch (v$6119[0]) { case 1: {var v$8167 = [33,v$6173];
return [v$6166,v$6167,[0,[basics$0ElabTopdec$1$1.errorConv$229(v$6170,v$8167),v$6168,v$6172,v$6173,v$6160]]];
 break; }default: {var v$6158 = v$6119[1];
var v$6155 = basics$0Environments$1.to_theta_and_VE$1680(v$6158);
var v$6156 = v$6155[0];
var v$6127 = basics$0StatObject$1.to_TyName$4079(v$6156);
switch (v$6127[0]) { case 1: {var v$8173 = [3,[v$6173,v$6156,v$6159]];
return [v$6166,v$6167,[0,[basics$0ElabTopdec$1$1.errorConv$229(v$6170,v$8173),v$6168,v$6172,v$6173,v$6160]]];
 break; }default: {var v$6154 = v$6127[1];
if (((special_objects$0TyName$1$3.member$2869(v$6154[0],v$6154[1],v$6154[2],v$6154[3],v$6154[4],v$6154[5]))(special_objects$0TyName$1$3.fromList$3273(v$6166)))?false:true) {var v$8179 = [1,[v$6173,v$6154]];
return [v$6166,v$6167,[0,[basics$0ElabTopdec$1$1.errorConv$229(v$6170,v$8179),v$6168,v$6172,v$6173,v$6160]]];
} else {var t$8494;
var v$8185 = v$6154[0];
var v$8186;
var fix$8495 = {};
fix$8495.$acc = function(v$7788,v$7789){lab$acc: while (true) {if (v$7788 == null) {return v$7789;
} else {var v$7790 = v$7788;
var v$7791 = v$7790[1];
var t$8496 = v$7791;
var t$8497 = SmlPrims.chk_ovf_i32(v$7789 + 1);
var v$7788 = t$8496;
var v$7789 = t$8497;
continue lab$acc;
};
};
};
var acc$7787 = fix$8495.$acc;
v$8186 = (acc$7787(v$6163,0));
t$8494 = ((v$8185 == v$8186)?false:true);
if (t$8494) {var v$8187 = [5,[v$6163,[v$6173,v$6154]]];
return [v$6166,v$6167,[0,[basics$0ElabTopdec$1$1.errorConv$229(v$6170,v$8187),v$6168,v$6172,v$6173,v$6160]]];
} else {var theta$$6136 = basics$0StatObject$1.from_TyVars_and_Type$3984(v$6163,v$6159);
var phi$6137 = basics$0StatObject$1.singleton$4350(v$6154,theta$$6136);
var phi_E$6138 = basics$0Environments$1.on_Env$3796(phi$6137,v$6167);
if (v$6154[1]?((basics$0StatObject$1.admits_equality$4024(theta$$6136))?false:true):false) {var v$8193 = [4,[v$6173,v$6154,v$6159]];
return [v$6166,v$6167,[0,[basics$0ElabTopdec$1$1.errorConv$229(v$6170,v$8193),v$6168,v$6172,v$6173,v$6160]]];
} else {if ((basics$0ElabTopdec$1$1.wellformed_E$365(phi_E$6138))?false:true) {var v$8199 = [2,[v$6173,v$6154,v$6159]];
return [v$6166,v$6167,[0,[basics$0ElabTopdec$1$1.errorConv$229(v$6170,v$8199),v$6168,v$6172,v$6173,v$6160]]];
} else {var t$8502;
var fix$8498 = {};
fix$8498.$all = function(v$7810){lab$all: while (true) {if (v$7810 == null) {return null;
} else {var v$7811 = v$7810;
var v$7812 = v$7811[0];
var v$7813 = v$7811[1];
var t$8500;
var t$8499;
var v$8267 = v$6154[2];
var v$8268 = v$7812[2];
var v$8269 = v$8267[0][1];
var v$8270 = v$8268[0][1];
t$8499 = ((v$8269[0] == v$8270[0])?(v$8269[1] == v$8270[1]):false);
t$8500 = (t$8499?false:true);
if (t$8500) {return [v$7812,fix$8498.$all(v$7813)];
} else {var t$8501 = v$7813;
var v$7810 = t$8501;
continue lab$all;
};
};
};
};
var all$7809 = fix$8498.$all;
t$8502 = (all$7809(v$6166));
return [t$8502,phi_E$6138,[0,[basics$0ElabTopdec$1$1.okConv$228(v$6170),v$6168,v$6172,v$6173,v$6160]]];
};
};
};
};
} };
} };
 break; }default: {var v$6161 = v$6112[1];
return [v$6166,v$6167,[0,[basics$0ElabTopdec$1$1.okConv$228(v$6170),v$6168,v$6172,v$6173,v$6161]]];
} };
} };
};
fix$8477.$elab_strdesc = function(v$7304,v$7305,v$7306){var v$7247 = v$7305[1];
var v$7248 = v$7247[3];
switch (v$7248[0]) { case 1: {var v$7268 = v$7247[0];
var v$7269 = v$7247[1];
var v$7270 = v$7247[2];
var v$7264 = fix$8477.$elab_sigexp$(v$7304,v$7270);
var v$7265 = v$7264[0];
var v$7266 = v$7264[1];
var v$7267 = v$7264[2];
var v$7261 = basics$0ElabTopdec$1$8.add_ids_strid$5397(v$7306,v$7269);
var v$7262 = v$7261[0];
var v$7263 = v$7261[1];
var out_i$7256 = v$7262?(basics$0ElabTopdec$1$1.repeatedIdsError$243(v$7268,[[2,v$7269],null])):(basics$0ElabTopdec$1$1.okConv$228(v$7268));
return [v$7265,basics$0Environments$1.singleton$2134([v$7269,v$7266]),[0,[out_i$7256,v$7269,v$7267,[1]]],v$7263];
 break; }default: {var v$7300 = v$7247[0];
var v$7301 = v$7247[1];
var v$7302 = v$7247[2];
var v$7303 = v$7248[1];
var v$7296 = fix$8477.$elab_sigexp$(v$7304,v$7302);
var v$7297 = v$7296[0];
var v$7298 = v$7296[1];
var v$7299 = v$7296[2];
var v$7293 = basics$0ElabTopdec$1$8.add_ids_strid$5397(v$7306,v$7301);
var v$7294 = v$7293[0];
var v$7295 = v$7293[1];
var v$7288 = fix$8477.$elab_strdesc(v$7304,v$7303,v$7295);
var v$7289 = v$7288[0];
var v$7290 = v$7288[1];
var v$7291 = v$7288[2];
var v$7292 = v$7288[3];
var out_i$7283 = v$7294?(basics$0ElabTopdec$1$1.repeatedIdsError$243(v$7300,[[2,v$7301],null])):(basics$0ElabTopdec$1$1.okConv$228(v$7300));
return [basics$0ElabTopdec$1$1.s$n$200([v$7297,v$7289]),basics$0ElabTopdec$1$1.SE_plus_SE$192(basics$0Environments$1.singleton$2134([v$7301,v$7298]),v$7290),[0,[out_i$7283,v$7301,v$7299,[0,v$7291]]],v$7292];
} };
};
basics$0ElabTopdec$1$9.elab_spec$5656 = fix$8477.$elab_spec;
basics$0ElabTopdec$1$9.elab_sigexp$$5660 = fix$8477.$elab_sigexp$;
basics$0ElabTopdec$1$9.elab_strdesc$5647 = fix$8477.$elab_strdesc;
basics$0ElabTopdec$1$9.elab_sigexp$5659 = function(v$6189,v$6190){var v$6185 = basics$0ElabTopdec$1$9.elab_sigexp$$5660(v$6189,v$6190);
var v$6186 = v$6185[0];
var v$6187 = v$6185[1];
var v$6188 = v$6185[2];
return [basics$0ModuleStatObject$1.from_T_and_E$538(special_objects$0TyName$1$3.fromList$3273(v$6186),v$6187),v$6188];
};
var fix$8478 = {};
fix$8478.$elab_strdecs = function(v$5993,v$5994){switch (v$5994[0]) { case 1: {var v$5981 = v$5994[1];
var v$5982 = v$5981[0];
var v$5983 = v$5981[1];
var v$5984 = v$5981[2];
var v$5976 = fix$8478.$elab_strdecs(v$5993,v$5983);
var v$5977 = v$5976[0];
var v$5978 = v$5976[1];
var v$5979 = v$5976[2];
var v$5980 = v$5976[3];
var v$5972 = fix$8478.$elab_strdec(v$5979,v$5984);
var v$5973 = v$5972[0];
var v$5974 = v$5972[1];
var v$5975 = v$5972[2];
return [basics$0ElabTopdec$1$1.s$n$200([v$5977,v$5973]),basics$0ElabTopdec$1$1.E_plus_E$171(v$5978,v$5974),basics$0ElabTopdec$1$1.B_plus_E$143(v$5979,v$5974),[1,[basics$0ElabTopdec$1$1.okConv$228(v$5982),v$5980,v$5975]]];
 break; }default: {var v$5989 = fix$8478.$elab_strdec(v$5993,v$5994);
var v$5990 = v$5989[0];
var v$5991 = v$5989[1];
var v$5992 = v$5989[2];
return [v$5990,v$5991,basics$0ElabTopdec$1$1.B_plus_E$143(v$5993,v$5991),v$5992];
} };
};
fix$8478.$elab_strdec = function(v$5948,v$5949){switch (v$5949[0]) { case 4: {var v$5931 = v$5949[1];
var v$5932 = v$5931[0];
var v$5933 = v$5931[1];
var v$5927 = basics$0ElabDec$1.elab_dec$4240(basics$0ModuleEnvironments$1.to_C$506(v$5948),v$5933);
var v$5928 = v$5927[0];
var v$5929 = v$5927[1];
var v$5930 = v$5927[2];
return [v$5928,v$5929,[4,[basics$0ElabTopdec$1$1.okConv$228(v$5932),v$5930]]];
 break; }case 0: {var v$5919 = v$5949[1];
var v$5920 = v$5919[0];
var v$5921 = v$5919[1];
var v$5915 = fix$8478.$elab_strbind(v$5948,v$5921);
var v$5916 = v$5915[0];
var v$5917 = v$5915[1];
var v$5918 = v$5915[2];
return [v$5916,basics$0Environments$1.from_SE$2424(v$5917),[0,[basics$0ElabTopdec$1$1.okConv$228(v$5920),v$5918]]];
 break; }case 2: {var v$5906 = v$5949[1];
var v$5907 = v$5906[0];
var v$5908 = v$5906[1];
var v$5909 = v$5906[2];
var v$5902 = fix$8478.$elab_strdec(v$5948,v$5908);
var v$5903 = v$5902[0];
var v$5904 = v$5902[1];
var v$5905 = v$5902[2];
var v$5898 = fix$8478.$elab_strdec(basics$0ElabTopdec$1$1.B_plus_E$143(v$5948,v$5904),v$5909);
var v$5899 = v$5898[0];
var v$5900 = v$5898[1];
var v$5901 = v$5898[2];
return [basics$0ElabTopdec$1$1.s$n$200([v$5903,v$5899]),v$5900,[2,[basics$0ElabTopdec$1$1.okConv$228(v$5907),v$5905,v$5901]]];
 break; }case 3: {var v$5888 = v$5949[1];
return [null,basics$0Environments$1.empty$2601,[3,basics$0ElabTopdec$1$1.okConv$228(v$5888)]];
 break; }default: {var v$5939 = fix$8478.$elab_strdecs(v$5948,v$5949);
return [v$5939[0],v$5939[1],v$5939[3]];
} };
};
fix$8478.$elab_strexp = function(v$5860,v$5861){switch (v$5861[0]) { case 1: {var v$5837 = v$5861[1];
var v$5838 = v$5837[0];
var v$5839 = v$5837[1];
var v$5833 = fix$8478.$elab_strdec(v$5860,v$5839);
var v$5834 = v$5833[0];
var v$5835 = v$5833[1];
var v$5836 = v$5833[2];
return [v$5834,v$5835,[1,[basics$0ElabTopdec$1$1.okConv$228(v$5838),v$5836]]];
 break; }case 3: {var v$5825 = v$5861[1];
var v$5826 = v$5825[0];
var v$5827 = v$5825[1];
var v$5822 = (basics$0ModuleEnvironments$1.lookup_longstrid$573(v$5860))(v$5827);
switch (v$5822[0]) { case 0: {return [null,v$5822[1],[3,[basics$0ElabTopdec$1$1.okConv$228(v$5826),v$5827]]];
 break; }default: {return [null,basics$0Environments$1.bogus$2606,[3,[basics$0ElabTopdec$1$1.errorConv$229(v$5826,[34,v$5827]),v$5827]]];
} };
 break; }case 0: {var v$5813 = v$5861[1];
var v$5814 = v$5813[0];
var v$5815 = v$5813[1];
var v$5816 = v$5813[2];
var v$5809 = fix$8478.$elab_strexp(v$5860,v$5815);
var v$5810 = v$5809[0];
var v$5811 = v$5809[1];
var v$5812 = v$5809[2];
var v$5806;
var v$8050 = basics$0ElabTopdec$1$9.elab_sigexp$$5660(v$5860,v$5816);
var v$8051 = v$8050[0];
var v$8052 = v$8050[1];
var v$8053 = v$8050[2];
v$5806 = [basics$0ModuleStatObject$1.from_T_and_E$538(special_objects$0TyName$1$3.fromList$3273(v$8051),v$8052),v$8053];
var v$5807 = v$5806[0];
var v$5808 = v$5806[1];
var v$5803 = basics$0ElabTopdec$1$1.Sigma_match$295(v$5814,v$5807,v$5811);
var v$5804 = v$5803[0];
var v$5805 = v$5803[1];
return [v$5810,v$5805,[0,[basics$0ElabInfo$1.plus_TypeInfo$128(v$5804,[3,v$5805]),v$5812,v$5808]]];
 break; }case 2: {var v$5787 = v$5861[1];
var v$5788 = v$5787[0];
var v$5789 = v$5787[1];
var v$5790 = v$5787[2];
var v$5783 = fix$8478.$elab_strexp(v$5860,v$5789);
var v$5785 = v$5783[1];
var v$5786 = v$5783[2];
var v$5780;
var v$8057 = basics$0ElabTopdec$1$9.elab_sigexp$$5660(v$5860,v$5790);
var v$8058 = v$8057[0];
var v$8059 = v$8057[1];
var v$8060 = v$8057[2];
v$5780 = [basics$0ModuleStatObject$1.from_T_and_E$538(special_objects$0TyName$1$3.fromList$3273(v$8058),v$8059),v$8060];
var v$5781 = v$5780[0];
var v$5782 = v$5780[1];
var v$5774 = basics$0ElabTopdec$1$1.Sigma_match$$308(v$5788,v$5781,v$5785);
var v$5775 = v$5774[0];
var v$5776 = v$5774[1];
var v$5777 = v$5774[2];
var v$5778 = v$5774[3];
var v$5779 = v$5774[4];
var out_i$5773 = basics$0ElabInfo$1.plus_TypeInfo$128(v$5775,[8,[v$5776,v$5779]]);
return [special_objects$0TyName$1$3.list$3264(v$5777),v$5778,[2,[out_i$5773,v$5786,v$5782]]];
 break; }case 5: {var v$5755 = v$5861[1];
var v$5756 = v$5755[0];
var v$5757 = v$5755[1];
var v$5758 = v$5755[2];
var v$5751 = fix$8478.$elab_strexp(v$5860,v$5758);
var v$5752 = v$5751[0];
var v$5753 = v$5751[1];
var v$5754 = v$5751[2];
var v$5707 = (basics$0ModuleEnvironments$1.lookup_funid$646(v$5860))(v$5757);
switch (v$5707[0]) { case 0: {var v$5748 = v$5707[1];
var v$5750 = v$5748[1];
try {var v$5723 = basics$0ModuleStatObject$1.match_via$885(v$5750,v$5753);
var v$5724 = v$5723[0];
var v$5725 = v$5723[1];
var v$5726 = v$5723[2];
var v$5720 = basics$0ModuleStatObject$1.to_T_and_E$527(v$5724);
var v$5721 = v$5720[0];
var v$5722 = v$5720[1];
var out_i$5716 = basics$0ElabTopdec$1$1.typeConv$236(v$5756,[12,[v$5722,v$5726,v$5725]]);
return [basics$0ElabTopdec$1$1.s$n$200([v$5752,special_objects$0TyName$1$3.list$3264(v$5721)]),v$5722,[5,[out_i$5716,v$5757,v$5754]]];
} catch(v$8492) {return (function(v$5730){var t$8493 = v$5730;
if (t$8493[0] == basics$0ModuleStatObject$1.en$No_match$97) {var reason$5727 = v$5730[1];
var v$5744 = basics$0ModuleStatObject$1.to_T_and_E_and_Sigma$774(v$5750);
var v$5745 = v$5744[0];
var v$5747 = v$5744[2];
var v$5741 = basics$0ModuleStatObject$1.to_T_and_E$527(v$5747);
var v$5742 = v$5741[0];
var v$5743 = v$5741[1];
var T$E$$5738 = basics$0ModuleStatObject$1.from_T_and_E$538(special_objects$0TyName$1$3.difference$3006(basics$0ElabTopdec$1$1.tynames_E$204(v$5743),special_objects$0TyName$1$3.union$2914(v$5745,v$5742)),v$5743);
var out_i$5739 = basics$0ElabTopdec$1$1.errorConv$229(v$5756,[19,reason$5727]);
var E$$5740 = basics$0ModuleStatObject$1.instance$565(T$E$$5738);
return [basics$0ElabTopdec$1$1.s$n$200([v$5752,special_objects$0TyName$1$3.list$3264(v$5742)]),E$$5740,[5,[out_i$5739,v$5757,v$5754]]];
} else {throw v$5730;
};
})(v$8492);
};
 break; }default: {return [v$5752,basics$0Environments$1.bogus$2606,[5,[basics$0ElabTopdec$1$1.errorConv$229(v$5756,[36,v$5757]),v$5757,v$5754]]];
} };
 break; }default: {var v$5856 = v$5861[1];
var v$5857 = v$5856[0];
var v$5858 = v$5856[1];
var v$5859 = v$5856[2];
var v$5852 = fix$8478.$elab_strdec(v$5860,v$5858);
var v$5853 = v$5852[0];
var v$5854 = v$5852[1];
var v$5855 = v$5852[2];
var v$5848 = fix$8478.$elab_strexp(basics$0ElabTopdec$1$1.B_plus_E$143(v$5860,v$5854),v$5859);
var v$5849 = v$5848[0];
var v$5850 = v$5848[1];
var v$5851 = v$5848[2];
return [basics$0ElabTopdec$1$1.s$n$200([v$5853,v$5849]),v$5850,[4,[basics$0ElabTopdec$1$1.okConv$228(v$5857),v$5855,v$5851]]];
} };
};
fix$8478.$elab_strbind = function(v$6031,v$6032){var v$6026 = v$6032[1];
var v$6027 = v$6026[0];
var v$6028 = v$6026[1];
var v$6029 = v$6026[2];
var v$6030 = v$6026[3];
var v$6022 = fix$8478.$elab_strexp(v$6031,v$6029);
var v$6023 = v$6022[0];
var v$6024 = v$6022[1];
var v$6025 = v$6022[2];
var v$6018;
var v$8037 = null;
switch (v$6030[0]) { case 0: {var v$8043 = v$6030[1];
var v$8045 = fix$8478.$elab_strbind(v$6031,v$8043);
v$6018 = [v$8045[0],v$8045[1],[0,v$8045[2]]];
 break; }default: {v$6018 = [v$8037,basics$0Environments$1.empty$2133,[1]];
} };
var v$6019 = v$6018[0];
var v$6020 = v$6018[1];
var v$6021 = v$6018[2];
var out_i$6013 = (edlib$0EqSet$1.member$128(function(v$8445){return syntax_objects$0StrId$1.eq_strid$181(v$8445[0],v$8445[1]);
},v$6028,basics$0Environments$1.dom$2162(v$6020)))?(basics$0ElabTopdec$1$1.repeatedIdsError$243(v$6027,[[2,v$6028],null])):(basics$0ElabTopdec$1$1.okConv$228(v$6027));
return [basics$0ElabTopdec$1$1.s$n$200([v$6019,v$6023]),basics$0ElabTopdec$1$1.SE_plus_SE$192(basics$0Environments$1.singleton$2134([v$6028,v$6024]),v$6020),[0,[out_i$6013,v$6028,v$6025,v$6021]]];
};
basics$0ElabTopdec$1$9.elab_strdecs$5662 = fix$8478.$elab_strdecs;
basics$0ElabTopdec$1$9.elab_strdec$5663 = fix$8478.$elab_strdec;
basics$0ElabTopdec$1$9.elab_strexp$5664 = fix$8478.$elab_strexp;
basics$0ElabTopdec$1$9.elab_strbind$5661 = fix$8478.$elab_strbind;
var fix$8479 = {};
fix$8479.$elab_funbind = function(v$7387,v$7388,v$7389){var v$7380 = v$7389[1];
var v$7381 = v$7380[0];
var v$7382 = v$7380[1];
var v$7383 = v$7380[2];
var v$7384 = v$7380[3];
var v$7385 = v$7380[4];
var v$7386 = v$7380[5];
var v$7377;
var v$8067 = basics$0ElabTopdec$1$9.elab_sigexp$$5660(v$7388,v$7384);
var v$8068 = v$8067[0];
var v$8069 = v$8067[1];
var v$8070 = v$8067[2];
v$7377 = [basics$0ModuleStatObject$1.from_T_and_E$538(special_objects$0TyName$1$3.fromList$3273(v$8068),v$8069),v$8070];
var v$7378 = v$7377[0];
var v$7379 = v$7377[1];
var v$7374 = basics$0ModuleStatObject$1.to_T_and_E$527(v$7378);
var v$7375 = v$7374[0];
var v$7376 = v$7374[1];
var B$$7347 = basics$0ElabTopdec$1$1.B_plus_E$143(v$7388,basics$0Environments$1.from_SE$2424(basics$0Environments$1.singleton$2134([v$7383,v$7376])));
var v$7370 = basics$0ElabTopdec$1$9.elab_strexp$5664(B$$7347,v$7385);
var v$7371 = v$7370[0];
var v$7372 = v$7370[1];
var v$7373 = v$7370[2];
var T$$7352 = special_objects$0TyName$1$3.intersect$3053(basics$0ElabTopdec$1$1.tynames_E$204(v$7372),special_objects$0TyName$1$3.fromList$3273(v$7371));
var T$E$$7353 = basics$0ModuleStatObject$1.from_T_and_E$538(T$$7352,v$7372);
var v$7367;
switch (v$7386[0]) { case 0: {var v$8079 = v$7386[1];
var v$8081 = fix$8479.$elab_funbind(v$7387,v$7388,v$8079);
v$7367 = [v$8081[0],[0,v$8081[1]]];
 break; }default: {v$7367 = [basics$0ModuleEnvironments$1.empty$241,[1]];
} };
var v$7368 = v$7367[0];
var v$7369 = v$7367[1];
var out_i$7357;
if (edlib$0EqSet$1.member$128(function(v$8446){return syntax_objects$0FunId$1.eq_funid$109(v$8446[0],v$8446[1]);
},v$7382,basics$0ModuleEnvironments$1.dom$309(v$7368))) {out_i$7357 = (basics$0ElabTopdec$1$1.repeatedIdsError$243(v$7381,[[7,v$7382],null]));
} else {var t$8491 = basics$0ElabInfo$1.plus_TypeInfo$128;
var t$8490 = basics$0ElabTopdec$1$1.okConv$228(v$7381);
var t$8489;
var t$8488;
var v$7363 = [B$$7347];
t$8488 = [special_objects$0TyName$1$3.fromList$3273(v$7371),v$7376,v$7363,[1],v$7372];
t$8489 = [13,t$8488];
out_i$7357 = (t$8491(t$8490,t$8489));
};
return [basics$0ElabTopdec$1$1.F_plus_F$178(basics$0ModuleEnvironments$1.singleton$242([v$7382,[v$7387,basics$0ModuleStatObject$1.from_T_and_E_and_Sigma$762(v$7375,v$7376,T$E$$7353)]]),v$7368),[0,[out_i$7357,v$7382,v$7383,v$7379,v$7373,v$7369]]];
};
basics$0ElabTopdec$1$9.elab_funbind$5645 = fix$8479.$elab_funbind;
basics$0ElabTopdec$1$9.elab_fundec$5646 = function(v$7325,v$7326,v$7327){var v$7322 = v$7327[1];
var v$7323 = v$7322[0];
var v$7324 = v$7322[1];
var v$7319 = basics$0ElabTopdec$1$9.elab_funbind$5645(v$7325,v$7326,v$7324);
var v$7320 = v$7319[0];
var v$7321 = v$7319[1];
return [v$7320,[0,[basics$0ElabTopdec$1$1.okConv$228(v$7323),v$7321]]];
};
var fix$8480 = {};
fix$8480.$elab_sigbind = function(v$6260,v$6261){var v$6225 = v$6261[1];
var v$6226 = v$6225[3];
switch (v$6226[0]) { case 1: {var v$6235 = v$6225[0];
var v$6236 = v$6225[1];
var v$6237 = v$6225[2];
var v$6232;
var v$8085 = basics$0ElabTopdec$1$9.elab_sigexp$$5660(v$6260,v$6237);
var v$8086 = v$8085[0];
var v$8087 = v$8085[1];
var v$8088 = v$8085[2];
v$6232 = [basics$0ModuleStatObject$1.from_T_and_E$538(special_objects$0TyName$1$3.fromList$3273(v$8086),v$8087),v$8088];
var v$6233 = v$6232[0];
var v$6234 = v$6232[1];
return [basics$0ModuleEnvironments$1.singleton$82([v$6236,v$6233]),[0,[basics$0ElabInfo$1.plus_TypeInfo$128(basics$0ElabTopdec$1$1.okConv$228(v$6235),[4,basics$0ModuleStatObject$1.tynames$554(v$6233)]),v$6236,v$6234,[1]]]];
 break; }default: {var v$6256 = v$6225[0];
var v$6257 = v$6225[1];
var v$6258 = v$6225[2];
var v$6259 = v$6226[1];
var v$6253;
var v$8092 = basics$0ElabTopdec$1$9.elab_sigexp$$5660(v$6260,v$6258);
var v$8093 = v$8092[0];
var v$8094 = v$8092[1];
var v$8095 = v$8092[2];
v$6253 = [basics$0ModuleStatObject$1.from_T_and_E$538(special_objects$0TyName$1$3.fromList$3273(v$8093),v$8094),v$8095];
var v$6254 = v$6253[0];
var v$6255 = v$6253[1];
var G1$6241 = basics$0ModuleEnvironments$1.singleton$82([v$6257,v$6254]);
var v$6250 = fix$8480.$elab_sigbind(v$6260,v$6259);
var v$6251 = v$6250[0];
var v$6252 = v$6250[1];
var out_i$6245 = (edlib$0EqSet$1.member$128(function(v$8447){return syntax_objects$0SigId$1.eq_sigid$109(v$8447[0],v$8447[1]);
},v$6257,basics$0ModuleEnvironments$1.dom$118(v$6251)))?(basics$0ElabTopdec$1$1.repeatedIdsError$243(v$6256,[[3,v$6257],null])):(basics$0ElabInfo$1.plus_TypeInfo$128(basics$0ElabTopdec$1$1.okConv$228(v$6256),[4,basics$0ModuleStatObject$1.tynames$554(v$6254)]));
return [basics$0ElabTopdec$1$1.G_plus_G$157(G1$6241,v$6251),[0,[out_i$6245,v$6257,v$6255,[0,v$6252]]]];
} };
};
basics$0ElabTopdec$1$9.elab_sigbind$5657 = fix$8480.$elab_sigbind;
basics$0ElabTopdec$1$9.elab_sigdec$5658 = function(v$6208,v$6209){var v$6205 = v$6209[1];
var v$6206 = v$6205[0];
var v$6207 = v$6205[1];
var v$6202 = basics$0ElabTopdec$1$9.elab_sigbind$5657(v$6208,v$6207);
var v$6203 = v$6202[0];
var v$6204 = v$6202[1];
return [v$6203,[0,[basics$0ElabTopdec$1$1.okConv$228(v$6206),v$6204]]];
};
var fix$8481 = {};
fix$8481.$elab_topdec_opt = function(v$7503,v$7504,v$7505){switch (v$7505[0]) { case 0: {var v$7502 = v$7505[1];
var v$7499 = fix$8481.$elab_topdec(v$7503,v$7504,v$7502);
return [v$7499[0],[0,v$7499[1]]];
 break; }default: {return [basics$0ModuleEnvironments$1.empty$404,[1]];
} };
};
fix$8481.$elab_topdec = function(v$7482,v$7483,v$7484){switch (v$7484[0]) { case 0: {var v$7433 = v$7484[1];
var v$7434 = v$7433[2];
switch (v$7434[0]) { case 0: {var v$7445 = fix$8481.$elab_topdec_seq(v$7482,v$7483,v$7484);
var v$7446 = v$7445[0];
var v$7447 = v$7445[1];
var t$8487;
var fix$8484 = {};
fix$8484.$foldl = function(v$8107,v$8108){lab$foldl: while (true) {if (v$8108 == null) {return v$8107;
} else {var v$8109 = v$8108;
var v$8110 = v$8109[0];
var v$8111 = v$8109[1];
var t$8485 = basics$0ElabTopdec$1$1.B_plus_B$150(v$8107,v$8110);
var t$8486 = v$8111;
var v$8107 = t$8485;
var v$8108 = t$8486;
continue lab$foldl;
};
};
};
var foldl$8106 = fix$8484.$foldl;
t$8487 = (foldl$8106(basics$0ModuleEnvironments$1.empty$404,v$7446));
return [t$8487,v$7447];
 break; }default: {var v$7463 = v$7433[0];
var v$7464 = v$7433[1];
var v$7460 = basics$0ElabTopdec$1$9.elab_strdec$5663(v$7483,v$7464);
var v$7461 = v$7460[1];
var v$7462 = v$7460[2];
var v$7457 = fix$8481.$elab_topdec_opt(v$7482,basics$0ElabTopdec$1$1.B_plus_E$143(v$7483,v$7461),v$7434);
var v$7458 = v$7457[0];
var v$7459 = v$7457[1];
return [basics$0ElabTopdec$1$1.B_plus_B$150(basics$0ModuleEnvironments$1.from_E$556(v$7461),v$7458),[0,[basics$0ElabTopdec$1$1.okConv$228(v$7463),v$7462,v$7459]]];
} };
 break; }case 1: {var v$7428 = v$7484[1];
var v$7429 = v$7428[0];
var v$7430 = v$7428[1];
var v$7431 = v$7428[2];
var v$7425;
var v$8118 = v$7430[1];
var v$8119 = v$8118[0];
var v$8120 = v$8118[1];
var v$8121 = basics$0ElabTopdec$1$9.elab_sigbind$5657(v$7483,v$8120);
var v$8122 = v$8121[0];
var v$8123 = v$8121[1];
v$7425 = [v$8122,[0,[basics$0ElabTopdec$1$1.okConv$228(v$8119),v$8123]]];
var v$7426 = v$7425[0];
var v$7427 = v$7425[1];
var v$7422 = fix$8481.$elab_topdec_opt(v$7482,basics$0ElabTopdec$1$1.B_plus_G$164(v$7483,v$7426),v$7431);
var v$7423 = v$7422[0];
var v$7424 = v$7422[1];
return [basics$0ElabTopdec$1$1.B_plus_B$150(basics$0ModuleEnvironments$1.from_G$575(v$7426),v$7423),[1,[basics$0ElabTopdec$1$1.okConv$228(v$7429),v$7427,v$7424]]];
 break; }default: {var v$7478 = v$7484[1];
var v$7479 = v$7478[0];
var v$7480 = v$7478[1];
var v$7481 = v$7478[2];
var v$7475;
var v$8128 = v$7480[1];
var v$8129 = v$8128[0];
var v$8130 = v$8128[1];
var v$8131 = basics$0ElabTopdec$1$9.elab_funbind$5645(v$7482,v$7483,v$8130);
var v$8132 = v$8131[0];
var v$8133 = v$8131[1];
v$7475 = [v$8132,[0,[basics$0ElabTopdec$1$1.okConv$228(v$8129),v$8133]]];
var v$7476 = v$7475[0];
var v$7477 = v$7475[1];
var v$7472 = fix$8481.$elab_topdec_opt(v$7482,basics$0ElabTopdec$1$1.B_plus_F$185(v$7483,v$7476),v$7481);
var v$7473 = v$7472[0];
var v$7474 = v$7472[1];
return [basics$0ElabTopdec$1$1.B_plus_B$150(basics$0ModuleEnvironments$1.from_F$611(v$7476),v$7473),[2,[basics$0ElabTopdec$1$1.okConv$228(v$7479),v$7477,v$7474]]];
} };
};
fix$8481.$elab_topdec_seq = function(v$7547,v$7548,v$7549){switch (v$7549[0]) { case 0: {var v$7521 = v$7549[1];
var v$7522 = v$7521[2];
switch (v$7522[0]) { case 0: {var v$7537 = v$7521[0];
var v$7538 = v$7521[1];
var v$7539 = v$7522[1];
var v$7534 = basics$0ElabTopdec$1$9.elab_strdec$5663(v$7548,v$7538);
var v$7535 = v$7534[1];
var v$7536 = v$7534[2];
var B1$7527 = basics$0ModuleEnvironments$1.from_E$556(v$7535);
var v$7531 = fix$8481.$elab_topdec_seq(v$7547,basics$0ElabTopdec$1$1.B_plus_B$150(v$7548,B1$7527),v$7539);
var v$7532 = v$7531[0];
var v$7533 = v$7531[1];
return [[B1$7527,v$7532],[0,[basics$0ElabTopdec$1$1.okConv$228(v$7537),v$7536,[0,v$7533]]]];
 break; }default: {var v$8097 = fix$8481.$elab_topdec(v$7547,v$7548,v$7549);
return [[v$8097[0],null],v$8097[1]];
} };
 break; }default: {var v$8099 = fix$8481.$elab_topdec(v$7547,v$7548,v$7549);
return [[v$8099[0],null],v$8099[1]];
} };
};
basics$0ElabTopdec$1$9.elab_topdec_opt$5643 = fix$8481.$elab_topdec_opt;
var elab_topdec$5644 = fix$8481.$elab_topdec;
basics$0ElabTopdec$1$9.elab_topdec_seq$5642 = fix$8481.$elab_topdec_seq;
basics$0ElabTopdec$1$9.modify_info_topdec$7550 = function(v$7578,v$7579){switch (v$7578[0]) { case 0: {var v$7572 = v$7578[1];
return [0,[v$7579,v$7572[1],v$7572[2]]];
 break; }case 1: {var v$7568 = v$7578[1];
return [1,[v$7579,v$7568[1],v$7568[2]]];
 break; }default: {var v$7575 = v$7578[1];
return [2,[v$7579,v$7575[1],v$7575[2]]];
} };
};
basics$0ElabTopdec$1$9.elab_topdec$$7580 = function(v$7605,v$7606,v$7607){var res$7602 = elab_topdec$5644(v$7605,v$7606,v$7607);
var v$7603 = res$7602[0];
var v$7604 = res$7602[1];
var v$7594 = basics$0ElabTopdec$1$1.tyvars_B$$220(v$7603);
if (v$7594 == null) {return res$7602;
} else {var i$7595 = basics$0PreElabTopdecGrammar$1$1.info_on_topdec$606(v$7607);
var ids$7596 = basis$0List$1.map$697(function(v$7599){return v$7599[0];
},v$7594);
var out_i$7601 = basics$0ElabTopdec$1$1.errorConv$229(i$7595,[13,ids$7596]);
var t$8483 = v$7603;
var t$8482;
switch (v$7604[0]) { case 0: {var v$8137 = v$7604[1];
t$8482 = [0,[out_i$7601,v$8137[1],v$8137[2]]];
 break; }case 1: {var v$8138 = v$7604[1];
t$8482 = [1,[out_i$7601,v$8138[1],v$8138[2]]];
 break; }default: {var v$8139 = v$7604[1];
t$8482 = [2,[out_i$7601,v$8139[1],v$8139[2]]];
} };
return [t$8483,t$8482];
};
};
basics$0ElabTopdec$1$9.elab_topdec$7608 = function(a$7611){special_objects$0TyName$1$1.reset$100(0);
var res$7612 = basics$0ElabTopdec$1$9.elab_topdec$$7580(a$7611[0],a$7611[1],a$7611[2]);
special_objects$0TyName$1$1.reset$100(0);
return res$7612;
};
basics$0ElabTopdec$1$9.layoutStaticBasis$7613 = function(v$8471){return basics$0ModuleEnvironments$1.layout$519(v$8471);
};
return 0;
})();
