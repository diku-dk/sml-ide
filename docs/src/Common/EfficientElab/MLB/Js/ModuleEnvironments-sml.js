if ((typeof(basics$0ModuleEnvironments$1)) == "undefined") {basics$0ModuleEnvironments$1 = {};
};
(function(){basics$0ModuleEnvironments$1.empty$81 = [0,tools$0FinMap$1.empty$61(function(v$1429){return syntax_objects$0SigId$1.eq_sigid$109(v$1429[0],v$1429[1]);
})];
basics$0ModuleEnvironments$1.singleton$82 = function(x$984){var v$1403 = tools$0FinMap$1.singleton$62(function(v$1518){return syntax_objects$0SigId$1.eq_sigid$109(v$1518[0],v$1518[1]);
},x$984);
return [0,v$1403];
};
basics$0ModuleEnvironments$1.plus$84 = function(v$92,v$1431){var v$93 = v$92[1];
var v$95 = v$1431[1];
return [0,tools$0FinMap$1.plus$155(function(v$1432){return syntax_objects$0SigId$1.eq_sigid$109(v$1432[0],v$1432[1]);
},[v$93,v$95])];
};
basics$0ModuleEnvironments$1.lookup$96 = function(v$99){var v$103 = v$99[1];
return function(v$1494){return tools$0FinMap$1.lookup$76(function(v$1519){return syntax_objects$0SigId$1.eq_sigid$109(v$1519[0],v$1519[1]);
},v$103,v$1494);
};
};
basics$0ModuleEnvironments$1.tynames$104 = function(v$107){var v$117 = v$107[1];
return tools$0FinMap$1.fold$462(function(v$1434){return syntax_objects$0SigId$1.eq_sigid$109(v$1434[0],v$1434[1]);
},function(v$114){var v$115 = v$114[0];
var v$116 = v$114[1];
return special_objects$0TyName$1$3.union$2972(v$116,basics$0ModuleStatObject$1.tynames$554(v$115));
},special_objects$0TyName$1$3.empty$2784,v$117);
};
basics$0ModuleEnvironments$1.dom$118 = function(v$121){var v$125 = v$121[1];
return tools$0FinMap$1.dom$403(function(v$1435){return syntax_objects$0SigId$1.eq_sigid$109(v$1435[0],v$1435[1]);
},v$125);
};
basics$0ModuleEnvironments$1.layout$126 = function(v$129){var v$160 = v$129[1];
var l$133 = tools$0FinMap$1.Fold$481(function(v$1436){return syntax_objects$0SigId$1.eq_sigid$109(v$1436[0],v$1436[1]);
},function(v$134){return v$134;
},null,v$160);
return (l$133 == null)?[1,""]:[0,[basis$0List$1.map$697(function(v$987){var v$988 = v$987[0];
var v$989 = v$987[1];
var t$1543;
var v$991 = SmlPrims.concat(["signature ",[syntax_objects$0SigId$1.pr_SigId$60(v$988),[" : ",null]]]);
t$1543 = [[basics$0ModuleStatObject$1.layout$720(v$989),null],[1],"",3,v$991];
return [0,t$1543];
},l$133),[0," "],"",0,""]];
};
basics$0ModuleEnvironments$1.report$161 = function(v$169,v$170){var v$171 = v$170[1];
return tools$0FinMap$1.reportMapSORTED$543(function(v$1437){return syntax_objects$0SigId$1.eq_sigid$109(v$1437[0],v$1437[1]);
},function(v$1438){return syntax_objects$0SigId$1.s$j$68(v$1438[0],v$1438[1]);
},v$169,v$171);
};
basics$0ModuleEnvironments$1.pu$194;
var b$993 = tools$0FinMap$1.pu$602(function(v$1439){return syntax_objects$0SigId$1.eq_sigid$109(v$1439[0],v$1439[1]);
},[syntax_objects$0SigId$1.pu$77,basics$0ModuleStatObject$1.pu$740]);
basics$0ModuleEnvironments$1.pu$194 = (pickle$0pickle$1.shareGen$878((pickle$0pickle$1.convert0$2299(function(v$1534){return [0,v$1534];
},function(v$1535){return v$1535[1];
}))(b$993)));
basics$0ModuleEnvironments$1.lt_absprjid$200 = function(v$1440,v$1441){return v$1440 < v$1441;
};
basics$0ModuleEnvironments$1.absprjid_to_string$208 = function(absprjid$211){return absprjid$211;
};
basics$0ModuleEnvironments$1.mk_absprjid$212 = function(x$215){return x$215;
};
basics$0ModuleEnvironments$1.is_absprjid_basislib$216 = function(absprjid$219){return (basis$0Path$1.file$546(absprjid$219)) == "basis.pm";
};
basics$0ModuleEnvironments$1.strip_install_dir$220 = function(absprjid$223){if ((basis$0Path$1.file$546(absprjid$223)) == "basis.pm") {return basis$0Path$1.mkRelative$413(absprjid$223,tools$0Flags$1$1.install_dir$83[0]);
} else {return absprjid$223;
};
};
basics$0ModuleEnvironments$1.strip_install_dir$$228 = function(p$233){var v$238 = p$233[0];
var v$239 = p$233[1];
return ((basis$0Path$1.file$546(v$238)) == "basis.pm")?[basis$0Path$1.mkRelative$413(v$238,tools$0Flags$1$1.install_dir$83[0]),syntax_objects$0FunId$1.mk_FunId$58(basis$0Path$1.mkRelative$413(syntax_objects$0FunId$1.pr_FunId$60(v$239),tools$0Flags$1$1.install_dir$83[0]))]:p$233;
};
basics$0ModuleEnvironments$1.pu_absprjid$240 = pickle$0pickle$1.string$909;
basics$0ModuleEnvironments$1.empty$241 = [0,tools$0FinMap$1.empty$61(function(v$1442){return syntax_objects$0FunId$1.eq_funid$109(v$1442[0],v$1442[1]);
})];
basics$0ModuleEnvironments$1.singleton$242 = function(x$1018){var v$1406 = tools$0FinMap$1.singleton$62(function(v$1522){return syntax_objects$0FunId$1.eq_funid$109(v$1522[0],v$1522[1]);
},x$1018);
return [0,v$1406];
};
basics$0ModuleEnvironments$1.plus$244 = function(v$252,v$1444){var v$253 = v$252[1];
var v$255 = v$1444[1];
return [0,tools$0FinMap$1.plus$155(function(v$1445){return syntax_objects$0FunId$1.eq_funid$109(v$1445[0],v$1445[1]);
},[v$253,v$255])];
};
basics$0ModuleEnvironments$1.lookup$256 = function(v$259){var v$263 = v$259[1];
return function(v$1499){return tools$0FinMap$1.lookup$76(function(v$1523){return syntax_objects$0FunId$1.eq_funid$109(v$1523[0],v$1523[1]);
},v$263,v$1499);
};
};
basics$0ModuleEnvironments$1.tynames$264 = function(v$267){var v$278 = v$267[1];
return tools$0FinMap$1.fold$462(function(v$1447){return syntax_objects$0FunId$1.eq_funid$109(v$1447[0],v$1447[1]);
},function(v$274){var v$275 = v$274[0];
var v$276 = v$275[1];
var v$277 = v$274[1];
return special_objects$0TyName$1$3.union$2972(v$277,basics$0ModuleStatObject$1.tynames$787(v$276));
},special_objects$0TyName$1$3.empty$2784,v$278);
};
basics$0ModuleEnvironments$1.tyvars$279 = function(v$282){var v$293 = v$282[1];
return tools$0FinMap$1.fold$462(function(v$1448){return syntax_objects$0FunId$1.eq_funid$109(v$1448[0],v$1448[1]);
},function(v$289){var v$290 = v$289[0];
var v$291 = v$290[1];
var v$292 = v$289[1];
return basics$0StatObject$1.unionTyVarSet$788(basics$0ModuleStatObject$1.tyvars$800(v$291),v$292);
},null,v$293);
};
basics$0ModuleEnvironments$1.tyvars$$294 = function(v$297){var v$308 = v$297[1];
return tools$0FinMap$1.fold$462(function(v$1449){return syntax_objects$0FunId$1.eq_funid$109(v$1449[0],v$1449[1]);
},function(v$304){var v$305 = v$304[0];
var v$306 = v$305[1];
var v$307 = v$304[1];
return basis$0List$1.s$n$686(basics$0ModuleStatObject$1.tyvars$$810(v$306),v$307);
},null,v$308);
};
basics$0ModuleEnvironments$1.dom$309 = function(v$312){var v$316 = v$312[1];
return tools$0FinMap$1.dom$403(function(v$1450){return syntax_objects$0FunId$1.eq_funid$109(v$1450[0],v$1450[1]);
},v$316);
};
basics$0ModuleEnvironments$1.layout$317 = function(v$320){var v$352 = v$320[1];
var l$324 = tools$0FinMap$1.Fold$481(function(v$1451){return syntax_objects$0FunId$1.eq_funid$109(v$1451[0],v$1451[1]);
},function(v$325){return v$325;
},null,v$352);
return (l$324 == null)?[1,""]:[0,[basis$0List$1.map$697(function(v$1021){var v$1022 = v$1021[0];
var v$1023 = v$1021[1];
var v$1024 = v$1023[1];
var t$1544;
var v$1026 = SmlPrims.concat(["functor ",[syntax_objects$0FunId$1.pr_FunId$60(v$1022),[" : ",null]]]);
t$1544 = [[basics$0ModuleStatObject$1.layout$993(v$1024),null],[1],"",3,v$1026];
return [0,t$1544];
},l$324),[0," "],"",0,""]];
};
basics$0ModuleEnvironments$1.report$353 = function(v$369,v$370){var v$371 = v$370[1];
return tools$0FinMap$1.reportMapSORTED$543(function(v$1452){return syntax_objects$0FunId$1.eq_funid$109(v$1452[0],v$1452[1]);
},function(v$1453){return syntax_objects$0FunId$1.s$j$68(v$1453[0],v$1453[1]);
},function(v$1027){var v$1028 = v$1027[0];
var v$1029 = v$1027[1];
var v$1030 = v$1029[1];
return v$369([v$1028,v$1030]);
},v$371);
};
basics$0ModuleEnvironments$1.pu$397;
var b$1032 = tools$0FinMap$1.pu$602(function(v$1454){return syntax_objects$0FunId$1.eq_funid$109(v$1454[0],v$1454[1]);
},[syntax_objects$0FunId$1.pu$77,pickle$0pickle$1.shareGen$878(pickle$0pickle$1.pairGen0$983(pickle$0pickle$1.string$909,basics$0ModuleStatObject$1.pu$1021))]);
basics$0ModuleEnvironments$1.pu$397 = (pickle$0pickle$1.shareGen$878((pickle$0pickle$1.convert0$2299(function(v$1536){return [0,v$1536];
},function(v$1537){return v$1537[1];
}))(b$1032)));
basics$0ModuleEnvironments$1.empty$404 = [0,[basics$0Environments$1.empty$2601,basics$0ModuleEnvironments$1.empty$241,basics$0ModuleEnvironments$1.empty$81]];
basics$0ModuleEnvironments$1.initial$408 = function(v$410){return [0,[basics$0Environments$1.initial$2840(0),basics$0ModuleEnvironments$1.empty$241,basics$0ModuleEnvironments$1.empty$81]];
};
basics$0ModuleEnvironments$1.bogus$414 = basics$0ModuleEnvironments$1.empty$404;
basics$0ModuleEnvironments$1.plus$415 = function(v$430,v$1455){var v$431 = v$430[1];
var v$432 = v$431[1];
var v$433 = v$431[2];
var v$434 = v$431[0];
var v$436 = v$1455[1];
var v$437 = v$436[1];
var v$438 = v$436[2];
var v$439 = v$436[0];
var t$1545;
var v$427;
var v$1036 = v$432[1];
var v$1038 = v$437[1];
v$427 = [0,tools$0FinMap$1.plus$155(function(v$1456){return syntax_objects$0FunId$1.eq_funid$109(v$1456[0],v$1456[1]);
},[v$1036,v$1038])];
var v$428;
var v$1041 = v$433[1];
var v$1043 = v$438[1];
v$428 = [0,tools$0FinMap$1.plus$155(function(v$1457){return syntax_objects$0SigId$1.eq_sigid$109(v$1457[0],v$1457[1]);
},[v$1041,v$1043])];
t$1545 = [basics$0Environments$1.plus$2441(v$434,v$439),v$427,v$428];
return [0,t$1545];
};
basics$0ModuleEnvironments$1.on$440 = function(phi$443,B$446){var v$463 = B$446[1];
var v$464 = v$463[1];
var v$465 = v$463[2];
var v$466 = v$463[0];
if (basics$0StatObject$1.is_Id$4342(phi$443)) {return B$446;
} else {var t$1546;
var v$458;
var v$1049 = v$464[1];
v$458 = ((basics$0StatObject$1.is_Id$4342(phi$443))?v$464:[0,tools$0FinMap$1.composemap$436(function(v$1458){return syntax_objects$0FunId$1.eq_funid$109(v$1458[0],v$1458[1]);
},function(v$1050){var v$1051 = v$1050[0];
var v$1052 = v$1050[1];
return [v$1051,basics$0ModuleStatObject$1.on$820(phi$443,v$1052)];
},v$1049)]);
var v$459;
var v$1058 = v$465[1];
v$459 = ((basics$0StatObject$1.is_Id$4342(phi$443))?v$465:[0,tools$0FinMap$1.composemap$436(function(v$1459){return syntax_objects$0SigId$1.eq_sigid$109(v$1459[0],v$1459[1]);
},function(Sigma$1059){return basics$0ModuleStatObject$1.on$617(phi$443,Sigma$1059);
},v$1058)]);
t$1546 = [basics$0Environments$1.on_Env$3796(phi$443,v$466),v$458,v$459];
return [0,t$1546];
};
};
basics$0ModuleEnvironments$1.tyvars$467 = function(v$470){var v$476 = v$470[1];
var v$477 = v$476[1];
var v$479 = v$476[0];
var t$1548 = basics$0StatObject$1.unionTyVarSet$788;
var t$1547;
var v$1061 = v$477[1];
t$1547 = (tools$0FinMap$1.fold$462(function(v$1460){return syntax_objects$0FunId$1.eq_funid$109(v$1460[0],v$1460[1]);
},function(v$1062){var v$1063 = v$1062[0];
var v$1064 = v$1063[1];
var v$1065 = v$1062[1];
return basics$0StatObject$1.unionTyVarSet$788(basics$0ModuleStatObject$1.tyvars$800(v$1064),v$1065);
},null,v$1061));
return t$1548(t$1547,basics$0Environments$1.tyvars$2607(v$479));
};
basics$0ModuleEnvironments$1.tyvars$$480 = function(v$483){var v$489 = v$483[1];
var v$490 = v$489[1];
var v$492 = v$489[0];
var t$1550 = basis$0List$1.s$n$686;
var t$1549;
var v$1067 = v$490[1];
t$1549 = (tools$0FinMap$1.fold$462(function(v$1461){return syntax_objects$0FunId$1.eq_funid$109(v$1461[0],v$1461[1]);
},function(v$1068){var v$1069 = v$1068[0];
var v$1070 = v$1069[1];
var v$1071 = v$1068[1];
return basis$0List$1.s$n$686(basics$0ModuleStatObject$1.tyvars$$810(v$1070),v$1071);
},null,v$1067));
return t$1550(t$1549,basics$0Environments$1.tyvars$$2608(v$492));
};
basics$0ModuleEnvironments$1.tynames$493 = function(v$496){var v$502 = v$496[1];
var v$503 = v$502[1];
var v$504 = v$502[2];
var v$505 = v$502[0];
var t$1555 = special_objects$0TyName$1$3.union$2972;
var t$1554;
var v$1073 = v$503[1];
t$1554 = (tools$0FinMap$1.fold$462(function(v$1462){return syntax_objects$0FunId$1.eq_funid$109(v$1462[0],v$1462[1]);
},function(v$1074){var v$1075 = v$1074[0];
var v$1076 = v$1075[1];
var v$1077 = v$1074[1];
return special_objects$0TyName$1$3.union$2972(v$1077,basics$0ModuleStatObject$1.tynames$787(v$1076));
},special_objects$0TyName$1$3.empty$2784,v$1073));
var t$1553;
var t$1552 = special_objects$0TyName$1$3.union$2972;
var t$1551;
var v$1079 = v$504[1];
t$1551 = (tools$0FinMap$1.fold$462(function(v$1463){return syntax_objects$0SigId$1.eq_sigid$109(v$1463[0],v$1463[1]);
},function(v$1080){var v$1081 = v$1080[0];
var v$1082 = v$1080[1];
return special_objects$0TyName$1$3.union$2972(v$1082,basics$0ModuleStatObject$1.tynames$554(v$1081));
},special_objects$0TyName$1$3.empty$2784,v$1079));
t$1553 = (t$1552(t$1551,basics$0Environments$1.tynames$2609(v$505)));
return t$1555(t$1554,t$1553);
};
basics$0ModuleEnvironments$1.to_C$506 = function(v$509){var v$515 = v$509[1];
var v$518 = v$515[0];
return basics$0Environments$1.from_E$3396(v$518);
};
basics$0ModuleEnvironments$1.layout$519 = function(v$522){var v$533 = v$522[1];
var v$534 = v$533[1];
var v$535 = v$533[2];
var v$536 = v$533[0];
var t$1564;
var t$1563;
var t$1562;
var t$1560;
var v$1084 = v$534[1];
var l$1085 = tools$0FinMap$1.Fold$481(function(v$1464){return syntax_objects$0FunId$1.eq_funid$109(v$1464[0],v$1464[1]);
},function(v$1086){return v$1086;
},null,v$1084);
t$1560 = ((l$1085 == null)?[1,""]:[0,[basis$0List$1.map$697(function(v$1087){var v$1088 = v$1087[0];
var v$1089 = v$1087[1];
var v$1090 = v$1089[1];
var t$1561;
var v$1091 = SmlPrims.concat(["functor ",[syntax_objects$0FunId$1.pr_FunId$60(v$1088),[" : ",null]]]);
t$1561 = [[basics$0ModuleStatObject$1.layout$993(v$1090),null],[1],"",3,v$1091];
return [0,t$1561];
},l$1085),[0," "],"",0,""]]);
var t$1559;
var t$1558;
var t$1556;
var v$1093 = v$535[1];
var l$1094 = tools$0FinMap$1.Fold$481(function(v$1465){return syntax_objects$0SigId$1.eq_sigid$109(v$1465[0],v$1465[1]);
},function(v$1095){return v$1095;
},null,v$1093);
t$1556 = ((l$1094 == null)?[1,""]:[0,[basis$0List$1.map$697(function(v$1096){var v$1097 = v$1096[0];
var v$1098 = v$1096[1];
var t$1557;
var v$1099 = SmlPrims.concat(["signature ",[syntax_objects$0SigId$1.pr_SigId$60(v$1097),[" : ",null]]]);
t$1557 = [[basics$0ModuleStatObject$1.layout$720(v$1098),null],[1],"",3,v$1099];
return [0,t$1557];
},l$1094),[0," "],"",0,""]]);
t$1558 = [t$1556,[basics$0Environments$1.layout$2610(v$536),null]];
t$1559 = t$1558;
t$1562 = [t$1560,t$1559];
t$1563 = t$1562;
t$1564 = [t$1563,[0," "],"",0,""];
return [0,t$1564];
};
basics$0ModuleEnvironments$1.plus_E$537 = function(v$550,v$1466){var v$551 = v$550[1];
var v$552 = v$551[1];
var v$553 = v$551[2];
var v$554 = v$551[0];
return [0,[basics$0Environments$1.plus$2441(v$554,v$1466),v$552,v$553]];
};
basics$0ModuleEnvironments$1.from_E$556 = function(E$559){return [0,[E$559,basics$0ModuleEnvironments$1.empty$241,basics$0ModuleEnvironments$1.empty$81]];
};
basics$0ModuleEnvironments$1.to_E$563 = function(v$566){return v$566[1][0];
};
basics$0ModuleEnvironments$1.lookup_strid$572 = function(x$1103){var v$1500 = x$1103[1][0];
return function(v$1501){return basics$0Environments$1.lookup_strid$2486(v$1500,v$1501);
};
};
basics$0ModuleEnvironments$1.lookup_longstrid$573 = function(x$1108){var v$1502 = x$1108[1][0];
return function(v$1503){return basics$0Environments$1.lookup_longstrid$2572(v$1502,v$1503);
};
};
basics$0ModuleEnvironments$1.lookup_longtycon$574 = function(x$1113){var v$1504 = x$1113[1][0];
return function(v$1505){return basics$0Environments$1.lookup_longtycon$2565(v$1504,v$1505);
};
};
basics$0ModuleEnvironments$1.from_G$575 = function(G$578){return [0,[basics$0Environments$1.empty$2601,basics$0ModuleEnvironments$1.empty$241,G$578]];
};
basics$0ModuleEnvironments$1.to_G$582 = function(v$585){return v$585[1][2];
};
basics$0ModuleEnvironments$1.plus_G$591 = function(v$604,v$1467){var v$605 = v$604[1];
var v$606 = v$605[1];
var v$607 = v$605[2];
var t$1568;
var t$1567 = v$605[0];
var t$1566 = v$606;
var t$1565;
var v$1117 = v$607[1];
var v$1119 = v$1467[1];
t$1565 = [0,tools$0FinMap$1.plus$155(function(v$1468){return syntax_objects$0SigId$1.eq_sigid$109(v$1468[0],v$1468[1]);
},[v$1117,v$1119])];
t$1568 = [t$1567,t$1566,t$1565];
return [0,t$1568];
};
basics$0ModuleEnvironments$1.lookup_sigid$610 = function(x$1123){var v$1416 = x$1123[1][2];
var v$1417 = v$1416[1];
return function(v$1508){return tools$0FinMap$1.lookup$76(function(v$1524){return syntax_objects$0SigId$1.eq_sigid$109(v$1524[0],v$1524[1]);
},v$1417,v$1508);
};
};
basics$0ModuleEnvironments$1.from_F$611 = function(F$614){return [0,[basics$0Environments$1.empty$2601,F$614,basics$0ModuleEnvironments$1.empty$81]];
};
basics$0ModuleEnvironments$1.to_F$618 = function(v$621){return v$621[1][1];
};
basics$0ModuleEnvironments$1.plus_F$627 = function(v$640,v$1470){var v$641 = v$640[1];
var v$642 = v$641[1];
var v$643 = v$641[2];
var t$1571;
var t$1570 = v$641[0];
var t$1569;
var v$1129 = v$642[1];
var v$1131 = v$1470[1];
t$1569 = [0,tools$0FinMap$1.plus$155(function(v$1471){return syntax_objects$0FunId$1.eq_funid$109(v$1471[0],v$1471[1]);
},[v$1129,v$1131])];
t$1571 = [t$1570,t$1569,v$643];
return [0,t$1571];
};
basics$0ModuleEnvironments$1.lookup_funid$646 = function(x$1135){var v$1422 = x$1135[1][1];
var v$1423 = v$1422[1];
return function(v$1511){return tools$0FinMap$1.lookup$76(function(v$1525){return syntax_objects$0FunId$1.eq_funid$109(v$1525[0],v$1525[1]);
},v$1423,v$1511);
};
};
basics$0ModuleEnvironments$1.enrich$826 = function(v$1203,v$1473){var v$1204 = v$1203[1];
var v$1205 = v$1204[1];
var v$1206 = v$1204[2];
var v$1207 = v$1204[0];
var v$1209 = v$1473[1];
var v$1210 = v$1209[1];
var v$1211 = v$1209[2];
var v$1212 = v$1209[0];
var t$1573;
var v$1215 = v$1205[1];
var v$1217 = v$1210[1];
t$1573 = (tools$0FinMap$1.Fold$481(function(v$1474){return syntax_objects$0FunId$1.eq_funid$109(v$1474[0],v$1474[1]);
},function(v$1218){var v$1219 = v$1218[0];
var v$1220 = v$1219[0];
var v$1221 = v$1219[1];
var v$1222 = v$1221[0];
var v$1223 = v$1221[1];
if (v$1218[1]) {var v$1224 = tools$0FinMap$1.lookup$76(function(v$1475){return syntax_objects$0FunId$1.eq_funid$109(v$1475[0],v$1475[1]);
},v$1215,v$1220);
switch (v$1224[0]) { case 0: {var v$1225 = v$1224[1];
var v$1226 = v$1225[0];
var v$1227 = v$1225[1];
if (v$1226 == v$1222) {return basics$0ModuleStatObject$1.eq$947(v$1227,v$1223);
} else {return false;
};
 break; }default: {return false;
} };
} else {return false;
};
},true,v$1217));
if (t$1573) {var t$1572;
var v$1234 = v$1206[1];
var v$1236 = v$1211[1];
t$1572 = (tools$0FinMap$1.Fold$481(function(v$1476){return syntax_objects$0SigId$1.eq_sigid$109(v$1476[0],v$1476[1]);
},function(v$1237){var v$1238 = v$1237[0];
var v$1239 = v$1238[0];
var v$1240 = v$1238[1];
if (v$1237[1]) {var v$1241 = tools$0FinMap$1.lookup$76(function(v$1477){return syntax_objects$0SigId$1.eq_sigid$109(v$1477[0],v$1477[1]);
},v$1234,v$1239);
switch (v$1241[0]) { case 0: {var v$1242 = v$1241[1];
return basics$0ModuleStatObject$1.eq$684(v$1242,v$1240);
 break; }default: {return false;
} };
} else {return false;
};
},true,v$1236));
if (t$1572) {var a$1243 = [v$1207,v$1212];
return basics$0Environments$1.enrich$3126(a$1243);
} else {return false;
};
} else {return false;
};
};
basics$0ModuleEnvironments$1.restrict$827 = function(v$1249,v$1478){var v$1250 = v$1249[1];
var v$1251 = v$1250[1];
var v$1252 = v$1251[1];
var v$1253 = v$1250[2];
var v$1254 = v$1253[1];
var v$1255 = v$1250[0];
var v$1257 = v$1478[3];
var v$1258 = v$1478[2];
var v$1259 = v$1478[1];
var v$1260 = v$1478[0];
var v$1261 = v$1478[4];
var F$$1262;
var b$1273 = tools$0FinMap$1.empty$61(function(v$1479){return syntax_objects$0FunId$1.eq_funid$109(v$1479[0],v$1479[1]);
});
var fix$1574 = {};
fix$1574.$foldl = function(v$1276,v$1277){lab$foldl: while (true) {if (v$1277 == null) {return v$1276;
} else {var v$1278 = v$1277;
var v$1279 = v$1278[0];
var v$1280 = v$1278[1];
var t$1577;
var FunSig$1303;
var v$1304 = tools$0FinMap$1.lookup$76((function(env$1576){return function(v$1480){var v$1575 = env$1576[0];
return v$1575(v$1480[0],v$1480[1]);
};
})([syntax_objects$0FunId$1.eq_funid$109]),v$1252,v$1279);
switch (v$1304[0]) { case 0: {FunSig$1303 = v$1304[1];
 break; }default: {var s$1305 = ("restrictB.funid " + (syntax_objects$0FunId$1.pr_FunId$60(v$1279))) + " not in basis.";
FunSig$1303 = (tools$0Crash$1.impossible$59("ModuleEnvironments." + s$1305));
} };
t$1577 = (tools$0FinMap$1.add$141((function(env$1579){return function(v$1481){var v$1578 = env$1579[0];
return v$1578(v$1481[0],v$1481[1]);
};
})([syntax_objects$0FunId$1.eq_funid$109]),[v$1279,FunSig$1303,v$1276]));
var t$1580 = t$1577;
var t$1581 = v$1280;
var v$1276 = t$1580;
var v$1277 = t$1581;
continue lab$foldl;
};
};
};
var foldl$1275 = fix$1574.$foldl;
F$$1262 = (foldl$1275(b$1273,v$1260));
var G$$1281;
var b$1292 = tools$0FinMap$1.empty$61(function(v$1482){return syntax_objects$0SigId$1.eq_sigid$109(v$1482[0],v$1482[1]);
});
var fix$1582 = {};
fix$1582.$foldl = function(v$1295,v$1296){lab$foldl: while (true) {if (v$1296 == null) {return v$1295;
} else {var v$1297 = v$1296;
var v$1298 = v$1297[0];
var v$1299 = v$1297[1];
var t$1585;
var Sig$1312;
var v$1313 = tools$0FinMap$1.lookup$76((function(env$1584){return function(v$1483){var v$1583 = env$1584[0];
return v$1583(v$1483[0],v$1483[1]);
};
})([syntax_objects$0SigId$1.eq_sigid$109]),v$1254,v$1298);
switch (v$1313[0]) { case 0: {Sig$1312 = v$1313[1];
 break; }default: {var s$1314 = ("restrictB.sigid " + (syntax_objects$0SigId$1.pr_SigId$60(v$1298))) + " not in basis.";
Sig$1312 = (tools$0Crash$1.impossible$59("ModuleEnvironments." + s$1314));
} };
t$1585 = (tools$0FinMap$1.add$141((function(env$1587){return function(v$1484){var v$1586 = env$1587[0];
return v$1586(v$1484[0],v$1484[1]);
};
})([syntax_objects$0SigId$1.eq_sigid$109]),[v$1298,Sig$1312,v$1295]));
var t$1588 = t$1585;
var t$1589 = v$1299;
var v$1295 = t$1588;
var v$1296 = t$1589;
continue lab$foldl;
};
};
};
var foldl$1294 = fix$1582.$foldl;
G$$1281 = (foldl$1294(b$1292,v$1261));
return [0,[basics$0Environments$1.restrict$3179(v$1255,[v$1259,v$1258,v$1257]),[0,F$$1262],[0,G$$1281]]];
};
basics$0ModuleEnvironments$1.domain$831 = function(v$834){var v$862 = v$834[1];
var v$863 = v$862[1];
var v$864 = v$863[1];
var v$865 = v$862[2];
var v$866 = v$865[1];
var v$867 = v$862[0];
var v$858 = basics$0Environments$1.un$2351(v$867);
var v$859 = v$858[0];
var v$860 = v$858[1];
var v$861 = v$858[2];
var strids$844 = edlib$0EqSet$1.list$107(basics$0Environments$1.dom$2162(v$859));
var longstrids$845 = basis$0List$1.map$697(function(v$1541){return syntax_objects$0StrId$1.longStrIdOfStrId$130(v$1541);
},strids$844);
var vids$846 = edlib$0EqSet$1.list$107(basics$0Environments$1.dom$1166(v$861));
var longvids$847 = basis$0List$1.map$697(function(v$1542){return syntax_objects$0Ident$1.idToLongId$212(v$1542);
},vids$846);
var tycons$848 = edlib$0EqSet$1.list$107(basics$0Environments$1.dom$1816(v$860));
var longtycons$849 = basis$0List$1.map$697(function(t$852){return syntax_objects$0TyCon$1.implode_LongTyCon$99(null,t$852);
},tycons$848);
return [edlib$0EqSet$1.list$107(tools$0FinMap$1.dom$403(function(v$1485){return syntax_objects$0FunId$1.eq_funid$109(v$1485[0],v$1485[1]);
},v$864)),longstrids$845,longtycons$849,longvids$847,edlib$0EqSet$1.list$107(tools$0FinMap$1.dom$403(function(v$1486){return syntax_objects$0SigId$1.eq_sigid$109(v$1486[0],v$1486[1]);
},v$866))];
};
var fix$1590 = {};
fix$1590.$agree = function(v$880,v$1487,v$1488){lab$agree: while (true) {if (v$880 == null) {return true;
} else {var v$899 = v$880;
var v$900 = v$899[0];
var v$901 = v$899[1];
var v$1397 = basics$0Environments$1.lookup_longstrid$2572(v$1487[1][0],v$900);
var v$1398 = basics$0Environments$1.lookup_longstrid$2572(v$1488[1][0],v$900);
switch (v$1397[0]) { case 0: {switch (v$1398[0]) { case 0: {var v$896 = v$1397[1];
var v$897 = v$1398[1];
if (basics$0Environments$1.eq$3127([v$896,v$897])) {var t$1591 = v$901;
var t$1592 = v$1487;
var t$1593 = v$1488;
var v$880 = t$1591;
var v$1487 = t$1592;
var v$1488 = t$1593;
continue lab$agree;
} else {return false;
};
 break; }default: {return false;
} };
 break; }default: {return false;
} };
};
};
};
basics$0ModuleEnvironments$1.agree$868 = fix$1590.$agree;
basics$0ModuleEnvironments$1.match$904 = function(v$916,v$1489){var v$917 = v$916[1];
var v$920 = v$917[0];
var v$922 = v$1489[1];
var v$925 = v$922[0];
return basics$0Environments$1.match$3187(v$920,v$925);
};
basics$0ModuleEnvironments$1.pu$926;
var b$1321 = (pickle$0pickle$1.convert0$2299(function(v$1329){var v$1330 = v$1329[0];
var v$1331 = v$1329[1];
return [v$1330,v$1331[0],v$1331[1]];
},function(v$1332){return [v$1332[0],[v$1332[1],v$1332[2]]];
}))(pickle$0pickle$1.pairGen0$983(basics$0ModuleEnvironments$1.pu$397,pickle$0pickle$1.pairGen0$983(basics$0ModuleEnvironments$1.pu$194,basics$0Environments$1.pu$3235)));
basics$0ModuleEnvironments$1.pu$926 = (pickle$0pickle$1.shareGen$878((pickle$0pickle$1.convert0$2299(function(v$1538){return [0,[v$1538[2],v$1538[0],v$1538[1]]];
},function(v$1539){var v$1540 = v$1539[1];
return [v$1540[1],v$1540[2],v$1540[0]];
}))(b$1321)));
return 0;
})();
