if ((typeof(tools$0Timing$1)) == "undefined") {tools$0Timing$1 = {};
};
(function(){var compiler_timings$81 = [false];
tools$0Flags$1$6.add_bool_entry$4824(["Show compiler timings for each compilation phase.",compiler_timings$81,"compiler_timings",["Debug",["compiler timings",null]],false,[0,"timings"]]);
var t$88 = [basis$0Timer$1.startCPUTimer$88(0)];
var rt$89 = [SmlPrims.getrealtime()];
var timingNow$90 = [false];
var timer_nesting$91 = [0];
var timings$92 = [null];
tools$0Timing$1.timing_begin$111 = function(v$113){if (compiler_timings$81[0]) {if (timingNow$90[0]) {return (timer_nesting$91[0] = (SmlPrims.chk_ovf_i32(timer_nesting$91[0] + 1)),0);
} else {(t$88[0] = (basis$0Timer$1.startCPUTimer$88(0)),0);
(timingNow$90[0] = true,0);
return (rt$89[0] = (SmlPrims.getrealtime()),0);
};
} else {return 0;
};
};
var fix$732 = {};
fix$732.$insert_time_elem = function(v$161,v$164){if (v$161 == null) {return [v$164,null];
} else {var v$181 = v$161;
var v$182 = v$181[0];
var v$183 = v$182[1];
var v$184 = v$181[1];
var v$186 = v$164[1];
if (v$183 == v$186) {var t$757;
var t$747;
var v$448 = v$182[1];
var v$449 = v$182[2];
var v$450 = v$182[3];
var v$451 = v$182[0];
var v$452 = v$182[4];
var v$454 = v$164[1];
var v$455 = v$164[2];
var v$456 = v$164[3];
var v$457 = v$164[0];
var v$458 = v$164[4];
if ((v$448 == v$454)?false:true) {t$747 = (tools$0Crash$1.impossible$59("Timing.Can only add timeelements with same name."));
} else {var v$466;
try {v$466 = (basis$0Time$1.s$f$297(v$449,v$455));
} catch(v$748) {v$466 = ((function(E$470){basis$0General$1.print$163(("Function Time_plus raises exception " + E$470[0]) + "\n");
throw E$470;
})(v$748));
};
var v$475;
try {v$475 = (basis$0Time$1.s$f$297(v$450,v$456));
} catch(v$749) {v$475 = ((function(E$479){basis$0General$1.print$163(("Function Time_plus raises exception " + E$479[0]) + "\n");
throw E$479;
})(v$749));
};
var t$756;
try {t$756 = (basis$0Time$1.s$f$297(v$451,v$457));
} catch(v$755) {t$756 = ((function(E$487){basis$0General$1.print$163(("Function Time_plus raises exception " + E$487[0]) + "\n");
throw E$487;
})(v$755));
};
var t$754 = v$448;
var t$753 = v$466;
var t$752 = v$475;
var t$751;
try {t$751 = (basis$0Time$1.s$f$297(v$452,v$458));
} catch(v$750) {t$751 = ((function(E$495){basis$0General$1.print$163(("Function Time_plus raises exception " + E$495[0]) + "\n");
throw E$495;
})(v$750));
};
t$747 = [t$756,t$754,t$753,t$752,t$751];
};
t$757 = [t$747,v$184];
return t$757;
} else {return [v$182,fix$732.$insert_time_elem(v$184,v$164)];
};
};
};
var insert_time_elem$158 = fix$732.$insert_time_elem;
tools$0Timing$1.timing_end$218 = function(name$221){if (compiler_timings$81[0]?true:timingNow$90[0]) {try {if (timingNow$90[0]?false:true) {return tools$0Crash$1.impossible$59("Timing.timing_end called with no timer started");
} else {if (timer_nesting$91[0] > 0) {return (timer_nesting$91[0] = (SmlPrims.chk_ovf_i32(timer_nesting$91[0] - 1)),0);
} else {(timingNow$90[0] = false,0);
var v$260;
var v$729 = t$88[0];
v$260 = (basis$0Timer$1.checkCPUTimer$91(v$729[0],v$729[1],v$729[2]));
var v$261 = v$260[0];
var v$262 = v$260[1];
var wallclock$237;
try {wallclock$237 = (basis$0Timer$1.checkRealTimer$120(rt$89[0]));
} catch(v$734) {wallclock$237 = ((function(E$240){return basis$0Time$1.zeroTime$60;
})(v$734));
};
var time_elem$242 = [basis$0Time$1.zeroTime$60,name$221,v$262,v$261,wallclock$237];
var v$537 = time_elem$242[1];
var v$538 = time_elem$242[2];
try {var v$539 = tools$0Flags$1$1.timings_stream$108[0];
switch (v$539[0]) { case 0: {var v$540 = v$539[1];
try {basis$0TextIO$1.output$110(v$540,((v$537 + " ") + (basis$0Time$1.toString$150(v$538[0],v$538[1]))) + "\n");
0;
} catch(v$736) {(function(v$545){return tools$0Crash$1.impossible$59("Timing.maybe_export_timings.I could not write timings to timings stream");
})(v$736);
};
 break; }default: {0;
} };
} catch(v$735) {(function(E$548){basis$0General$1.print$163(("Function maybe_export_timings raises exception " + E$548[0]) + "\n");
throw E$548;
})(v$735);
};
var t$738 = timings$92;
var t$737;
var v$254 = timings$92[0];
if (v$254 == null) {t$737 = [["Unknown",[time_elem$242,null]],null];
} else {var v$255 = v$254;
var v$256 = v$255[0];
var v$257 = v$256[0];
var v$258 = v$256[1];
var v$259 = v$255[1];
t$737 = [[v$257,insert_time_elem$158(v$258,time_elem$242)],v$259];
};
(t$738[0] = t$737,0);
return 0;
};
};
} catch(v$733) {return (function(E$265){basis$0General$1.print$163(("Function timing_end raises exception " + E$265[0]) + "\n");
throw E$265;
})(v$733);
};
} else {return 0;
};
};
tools$0Timing$1.timing_end_res$270 = function(v$277,v$278){tools$0Timing$1.timing_end$218(v$277);
return v$278;
};
tools$0Timing$1.timing$279 = function(name$282,f$285,a$288){if (compiler_timings$81[0]) {if (timingNow$90[0]) {(timer_nesting$91[0] = (SmlPrims.chk_ovf_i32(timer_nesting$91[0] + 1)),0);
} else {(t$88[0] = (basis$0Timer$1.startCPUTimer$88(0)),0);
(timingNow$90[0] = true,0);
(rt$89[0] = (SmlPrims.getrealtime()),0);
};
} else {0;
};
return [f$285(a$288),tools$0Timing$1.timing_end$218(name$282)][0];
};
tools$0Timing$1.new_file$291 = function(filename$294){if (timingNow$90[0]) {return tools$0Crash$1.impossible$59("Timing.You have called Timing.new_file while a timer is active.");
} else {return (timings$92[0] = [[filename$294,null],timings$92[0]],0);
};
};
tools$0Timing$1.reset_timings$302 = function(v$304){(timings$92[0] = null,0);
return (timingNow$90[0] = false,0);
};
tools$0Timing$1.empty_local_time$307 = function(v$309){return [basis$0Time$1.zeroTime$60];
};
var local_timer$310 = [basis$0Timer$1.startCPUTimer$88(0)];
var local_timer_on$311 = [false];
tools$0Timing$1.local_timing_begin$312 = function(v$314){if (local_timer_on$311[0]) {return tools$0Crash$1.impossible$59("Timing.Local timer already started.");
} else {(local_timer_on$311[0] = true,0);
return (local_timer$310[0] = (basis$0Timer$1.startCPUTimer$88(0)),0);
};
};
tools$0Timing$1.local_timing_end$321 = function(timer$324){var t$744 = timer$324;
var t$743;
var t$742 = basis$0Time$1.s$f$297;
var t$741 = timer$324[0];
var t$740;
var t$739;
var v$730 = local_timer$310[0];
t$739 = (basis$0Timer$1.checkCPUTimer$91(v$730[0],v$730[1],v$730[2]));
t$740 = t$739[1];
t$743 = (t$742(t$741,t$740));
(t$744[0] = t$743,0);
return (local_timer_on$311[0] = false,0);
};
tools$0Timing$1.reset_local_time$331 = function(timer$334){return (timer$334[0] = basis$0Time$1.zeroTime$60,0);
};
tools$0Timing$1.pp_local_timing$335 = function(timer$338){try {var s$589;
var v$731 = timer$338[0];
s$589 = (basis$0Time$1.toString$150(v$731[0],v$731[1]));
var ssize$590 = s$589.length;
var fix$746 = {};
fix$746.$f = function(v$592){switch (v$592) { case 0: {return null;
 break; }default: {return [32,fix$746.$f(SmlPrims.chk_ovf_i32(v$592 - 1))];
} };
};
var f$591 = fix$746.$f;
return (15 <= ssize$590)?s$589:(SmlPrims.concat([SmlPrims.implode(f$591(SmlPrims.chk_ovf_i32(15 - ssize$590))),[s$589,null]]));
} catch(v$745) {return (function(E$341){basis$0General$1.print$163(("Function pp_local_timing raises exception " + E$341[0]) + "\n");
throw E$341;
})(v$745);
};
};
return 0;
})();
