if ((typeof(basics$0ParseElab$1)) == "undefined") {basics$0ParseElab$1 = {};
};
(function(){basics$0ParseElab$1.eq_src$344 = function(v$346,v$347){switch (v$346[0]) { case 0: {switch (v$347[0]) { case 0: {return v$346[1] == v$347[1];
 break; }default: {return false;
} };
 break; }case 1: {switch (v$347[0]) { case 1: {return v$346[1] == v$347[1];
 break; }default: {return false;
} };
 break; } };
};
var report_file_sig$78 = tools$0Flags$1$6.lookup_flag_entry$5164("report_file_sig");
var debug$79 = tools$0Flags$1$6.is_on0$5161("debug_compiler");
var en$Parse$121 = new String("Parse");
var fix$423 = {};
fix$423.$append_topdecs = function(v$125){if (v$125 == null) {return [1];
} else {var v$182 = v$125;
var v$183 = v$182[0];
var v$184 = v$182[1];
var t$438;
switch (v$183[0]) { case 0: {var v$168 = v$183[1];
var v$169 = v$168[2];
switch (v$169[0]) { case 1: {t$438 = [0,[v$168[0],v$168[1],fix$423.$append_topdecs(v$184)]];
 break; }default: {var v$172 = v$168[0];
var v$173 = v$168[1];
var v$174 = v$169[1];
t$438 = [0,[v$172,v$173,fix$423.$append_topdecs([v$174,v$184])]];
} };
 break; }case 1: {var v$160 = v$183[1];
var v$161 = v$160[2];
switch (v$161[0]) { case 1: {t$438 = [1,[v$160[0],v$160[1],fix$423.$append_topdecs(v$184)]];
 break; }default: {var v$164 = v$160[0];
var v$165 = v$160[1];
var v$166 = v$161[1];
t$438 = [1,[v$164,v$165,fix$423.$append_topdecs([v$166,v$184])]];
} };
 break; }default: {var v$175 = v$183[1];
var v$176 = v$175[2];
switch (v$176[0]) { case 1: {t$438 = [2,[v$175[0],v$175[1],fix$423.$append_topdecs(v$184)]];
 break; }default: {var v$179 = v$175[0];
var v$180 = v$175[1];
var v$181 = v$176[1];
t$438 = [2,[v$179,v$180,fix$423.$append_topdecs([v$181,v$184])]];
} };
} };
return [0,t$438];
};
};
var append_topdecs$122 = fix$423.$append_topdecs;
var fix$424 = {};
fix$424.$parse0 = function(v$213,v$214){var v$199 = basics$0Parse$1$17.parse$19891(v$213,v$214);
switch (v$199[0]) { case 0: {var v$209 = v$199[1];
var v$210 = v$209[0];
var v$211 = v$209[1];
var v$212 = v$209[2];
var v$206 = fix$424.$parse0(basics$0InfixBasis$1.compose$121(function(v$419){return syntax_objects$0Ident$1.eq_id$248(v$419[0],v$419[1]);
},[v$213,v$210]),v$212);
var v$207 = v$206[0];
var v$208 = v$206[1];
return [basics$0InfixBasis$1.compose$121(function(v$420){return syntax_objects$0Ident$1.eq_id$248(v$420[0],v$420[1]);
},[v$210,v$207]),[v$211,v$208]];
 break; }case 2: {var v$201 = v$199[1];
throw [en$Parse$121,v$201];
 break; }default: {return [basics$0InfixBasis$1.emptyB$83(function(v$421){return syntax_objects$0Ident$1.eq_id$248(v$421[0],v$421[1]);
}),null];
} };
};
var parse0$185 = fix$424.$parse0;
var empty_success$270 = [0,[basics$0ModuleEnvironments$1.empty$404,basics$0InfixBasis$1.emptyB$83(function(v$422){return syntax_objects$0Ident$1.eq_id$248(v$422[0],v$422[1]);
}),tools$0Report$1.null$59,basics$0PostElabGrammar$1$3.empty_topdec$3839]];
basics$0ParseElab$1.parse_elab$275 = function(v$316,v$315,v$314,v$317){try {tools$0Flags$1$1.chat$86[0]?(basis$0TextIO$1.output$110(tools$0Flags$1$1.log$101[0],"[parsing...")):0;
tools$0Timing$1.timing_begin$111(0);
var parse_res$282;
try {try {var src$367;
switch (v$317[0]) { case 1: {var v$368 = v$317[1];
src$367 = (basics$0Parse$1$17.sourceFromFile$19863(v$368));
 break; }default: {var v$369 = v$317[1];
src$367 = (basics$0Parse$1$17.sourceFromString$19864(v$369));
} };
var state$370 = basics$0Parse$1$17.begin$19877(src$367);
var v$371 = parse0$185(v$314,state$370);
var v$372 = v$371[0];
var v$373 = v$371[1];
parse_res$282 = [v$372,append_topdecs$122(v$373)];
} catch(v$427) {parse_res$282 = ((function(v$374){var t$428 = v$374;
if (t$428[0] == basis$0IO$1.en$Io$59) {var v$375 = v$374[1][0];
var t$429 = v$375;
if (t$429[0] == basis$0OS$1.en$SysErr$57) {var v$376 = v$374[1][2];
var v$377 = v$375[1][0];
var v$378 = v$375[1][1];
var t$435;
var t$434;
var t$433 = tools$0Report$1.line$60;
var t$432;
var t$431;
var t$430;
switch (v$378[0]) { case 1: {t$430 = v$377;
 break; }default: {t$430 = v$378[1];
} };
t$431 = (t$430 + ": ");
t$432 = (t$431 + v$376);
t$434 = (t$433(t$432));
t$435 = [en$Parse$121,t$434];
throw t$435;
} else {var v$381 = v$374[1][2];
throw [en$Parse$121,tools$0Report$1.line$60("Failed to read file: " + v$381)];
};
} else {throw v$374;
};
})(v$427));
};
} catch(v$426) {parse_res$282 = ((function(E$285){tools$0Timing$1.timing_end$218("Parse");
throw E$285;
})(v$426));
};
tools$0Timing$1.timing_end$218("Parse");
tools$0Flags$1$1.chat$86[0]?(basis$0TextIO$1.output$110(tools$0Flags$1$1.log$101[0],"]\n")):0;
tools$0Flags$1$1.chat$86[0]?(basis$0TextIO$1.output$110(tools$0Flags$1$1.log$101[0],"[elaboration...")):0;
tools$0Timing$1.timing_begin$111(0);
var elab_res$288;
var v$296 = parse_res$282[1];
switch (v$296[0]) { case 0: {var v$305 = parse_res$282[0];
var v$306 = v$296[1];
if (debug$79(0)) {basis$0General$1.print$163("AST before elaboration:\n");
var st$388 = basics$0PreElabTopdecGrammar$1$1.layoutTopdec$1475(v$306);
tools$0PrettyPrint$1.printTree$1079(st$388);
} else {0;
};
try {var v$394 = basics$0ElabTopdec$1$9.elab_topdec$7608([v$316,v$315,v$306]);
var v$395 = v$394[0];
var v$396 = v$394[1];
var v$397 = basics$0ErrorTraverse$1.traverse$1044(v$396);
if (v$397 == null) {elab_res$288 = [0,[v$395,v$305,report_file_sig$78[0]?(basics$0TopLevelReport$1.report$200(false,v$395,v$305)):tools$0Report$1.null$59,v$396]];
} else {var v$398 = v$397;
elab_res$288 = [1,[v$398[0],v$398[1]]];
};
} catch(v$436) {elab_res$288 = ((function(E$302){tools$0Timing$1.timing_end$218("Elab");
throw E$302;
})(v$436));
};
 break; }default: {elab_res$288 = empty_success$270;
} };
tools$0Timing$1.timing_end$218("Elab");
tools$0Flags$1$1.chat$86[0]?(basis$0TextIO$1.output$110(tools$0Flags$1$1.log$101[0],"]\n")):0;
return elab_res$288;
} catch(v$425) {return (function(v$311){var t$437 = v$311;
if (t$437[0] == en$Parse$121) {var report$308 = v$311[1];
tools$0Flags$1$1.chat$86[0]?(basis$0TextIO$1.output$110(tools$0Flags$1$1.log$101[0],"[parsing end...]\n")):0;
return [1,[report$308,["PARSE",null]]];
} else {throw v$311;
};
})(v$425);
};
};
return 0;
})();
