if ((typeof(basis$0Path$1)) == "undefined") {basis$0Path$1 = {};
};
(function(){basis$0Path$1.en$Path$54 = new String("Path");
basis$0Path$1.exn$Path$54 = [basis$0Path$1.en$Path$54];
basis$0Path$1.en$InvalidArc$55 = new String("InvalidArc");
basis$0Path$1.exn$InvalidArc$55 = [basis$0Path$1.en$InvalidArc$55];
basis$0Path$1.parentArc$93 = "..";
basis$0Path$1.currentArc$94 = ".";
basis$0Path$1.isAbsolute$95 = function(p$98){var t$1015;
var t$1014;
if (p$98.length >= 1) {var t$1013;
if (0 >= p$98.length) {throw CompilerInitial.exn$Subscript$52;
} else {t$1013 = (p$98.charCodeAt(0));
};
t$1014 = (t$1013 == 47);
} else {t$1014 = false;
};
t$1015 = (t$1014?[true,"",basis$0String$1.extract$116(p$98,1,[1])]:[false,"",p$98]);
return t$1015[0];
};
basis$0Path$1.isRelative$103 = function(p$106){var t$1019;
var t$1018;
var t$1017;
if (p$106.length >= 1) {var t$1016;
if (0 >= p$106.length) {throw CompilerInitial.exn$Subscript$52;
} else {t$1016 = (p$106.charCodeAt(0));
};
t$1017 = (t$1016 == 47);
} else {t$1017 = false;
};
t$1018 = (t$1017?[true,"",basis$0String$1.extract$116(p$106,1,[1])]:[false,"",p$106]);
t$1019 = t$1018[0];
return t$1019?false:true;
};
basis$0Path$1.fromString$107 = function(p$110){var v$119;
var t$1021;
if (p$110.length >= 1) {var t$1020;
if (0 >= p$110.length) {throw CompilerInitial.exn$Subscript$52;
} else {t$1020 = (p$110.charCodeAt(0));
};
t$1021 = (t$1020 == 47);
} else {t$1021 = false;
};
v$119 = (t$1021?[true,"",basis$0String$1.extract$116(p$110,1,[1])]:[false,"",p$110]);
if (v$119[0]) {var v$694 = v$119[0];
var v$695 = v$119[1];
var v$696 = v$119[2];
return [basis$0String$1.fields$231(function(c$697){return c$697 == 47;
},v$696),v$694,v$695];
} else {switch (v$119[2]) { case "": {return [null,false,v$119[1]];
 break; }default: {var v$689 = v$119[0];
var v$690 = v$119[1];
var v$691 = v$119[2];
return [basis$0String$1.fields$231(function(c$692){return c$692 == 47;
},v$691),v$689,v$690];
} };
};
};
basis$0Path$1.isRoot$133 = function(p$136){var v$141;
var t$1023;
if (p$136.length >= 1) {var t$1022;
if (0 >= p$136.length) {throw CompilerInitial.exn$Subscript$52;
} else {t$1022 = (p$136.charCodeAt(0));
};
t$1023 = (t$1022 == 47);
} else {t$1023 = false;
};
v$141 = (t$1023?[true,"",basis$0String$1.extract$116(p$136,1,[1])]:[false,"",p$136]);
if (v$141[0]) {switch (v$141[2]) { case "": {return true;
 break; }default: {return false;
} };
} else {return false;
};
};
basis$0Path$1.getVolume$145 = function(p$148){var t$1026;
var t$1025;
if (p$148.length >= 1) {var t$1024;
if (0 >= p$148.length) {throw CompilerInitial.exn$Subscript$52;
} else {t$1024 = (p$148.charCodeAt(0));
};
t$1025 = (t$1024 == 47);
} else {t$1025 = false;
};
t$1026 = (t$1025?[true,"",basis$0String$1.extract$116(p$148,1,[1])]:[false,"",p$148]);
return t$1026[1];
};
basis$0Path$1.validVolume$153 = function(v$1001,v$1002){return v$1002 == "";
};
basis$0Path$1.toString$160 = function(v$217,v$215,v$216){var fix$1027 = {};
fix$1027.$h = function(v$170,v$173){lab$h: while (true) {if (v$170 == null) {return v$173;
} else {var v$184 = v$170;
var v$185 = v$184[0];
var v$186 = v$184[1];
var t$1028 = v$186;
var t$1029 = [v$185,["/",v$173]];
var v$170 = t$1028;
var v$173 = t$1029;
continue lab$h;
};
};
};
var h$167 = fix$1027.$h;
if (v$216 == "") {if (v$215) {if (v$217 == null) {return v$216 + "/";
} else {var v$212 = v$217;
var v$213 = v$212[0];
var v$214 = v$212[1];
return SmlPrims.concat(basis$0List$1.rev$257(h$167(v$214,[v$213,["/",[v$216,null]]])));
};
} else {if (v$217 == null) {return v$216;
} else {var v$208 = v$217;
var v$209 = v$208[0];
switch (v$209) { case "": {throw basis$0Path$1.exn$Path$54;
 break; }default: {var v$210 = v$208[1];
return SmlPrims.concat([v$216,basis$0List$1.rev$257(h$167(v$210,[v$209,null]))]);
} };
};
};
} else {throw basis$0Path$1.exn$Path$54;
};
};
basis$0Path$1.concat$218 = function(v$258,v$259){var t$1035;
var t$1034;
var t$1033;
if (v$259.length >= 1) {var t$1032;
if (0 >= v$259.length) {throw CompilerInitial.exn$Subscript$52;
} else {t$1032 = (v$259.charCodeAt(0));
};
t$1033 = (t$1032 == 47);
} else {t$1033 = false;
};
t$1034 = (t$1033?[true,"",basis$0String$1.extract$116(v$259,1,[1])]:[false,"",v$259]);
t$1035 = t$1034[0];
if (t$1035) {throw basis$0Path$1.exn$Path$54;
} else {var v$248;
var t$1031;
if (v$258.length >= 1) {var t$1030;
if (0 >= v$258.length) {throw CompilerInitial.exn$Subscript$52;
} else {t$1030 = (v$258.charCodeAt(0));
};
t$1031 = (t$1030 == 47);
} else {t$1031 = false;
};
v$248 = (t$1031?[true,"",basis$0String$1.extract$116(v$258,1,[1])]:[false,"",v$258]);
if (v$248[0]) {var v$255 = v$248[2];
switch (v$255) { case "": {return (v$248[1] + "/") + v$259;
 break; }default: {var t$1041;
var t$1040;
var t$1039 = v$248[1] + "/";
var t$1038;
var t$1037;
var t$1036;
var v$945 = SmlPrims.chk_ovf_i32(v$255.length - 1);
if ((v$945 < 0)?true:(v$945 >= v$255.length)) {throw CompilerInitial.exn$Subscript$52;
} else {t$1036 = (v$255.charCodeAt(v$945));
};
t$1037 = (t$1036 == 47);
t$1038 = (t$1037?(basis$0String$1.extract$116(v$255,0,[0,SmlPrims.chk_ovf_i32(v$255.length - 1)])):v$255);
t$1040 = (t$1039 + t$1038);
t$1041 = (t$1040 + "/");
return t$1041 + v$259;
} };
} else {switch (v$248[1]) { case "": {switch (v$248[2]) { case "": {return v$259;
 break; }default: {var v$977 = v$248[1];
var v$978 = v$248[2];
var t$1047;
var t$1046;
var t$1045 = v$977;
var t$1044;
var t$1043;
var t$1042;
var v$979 = SmlPrims.chk_ovf_i32(v$978.length - 1);
if ((v$979 < 0)?true:(v$979 >= v$978.length)) {throw CompilerInitial.exn$Subscript$52;
} else {t$1042 = (v$978.charCodeAt(v$979));
};
t$1043 = (t$1042 == 47);
t$1044 = (t$1043?(basis$0String$1.extract$116(v$978,0,[0,SmlPrims.chk_ovf_i32(v$978.length - 1)])):v$978);
t$1046 = (t$1045 + t$1044);
t$1047 = (t$1046 + "/");
return t$1047 + v$259;
} };
 break; }default: {var v$981 = v$248[1];
var v$982 = v$248[2];
var t$1053;
var t$1052;
var t$1051 = v$981;
var t$1050;
var t$1049;
var t$1048;
var v$983 = SmlPrims.chk_ovf_i32(v$982.length - 1);
if ((v$983 < 0)?true:(v$983 >= v$982.length)) {throw CompilerInitial.exn$Subscript$52;
} else {t$1048 = (v$982.charCodeAt(v$983));
};
t$1049 = (t$1048 == 47);
t$1050 = (t$1049?(basis$0String$1.extract$116(v$982,0,[0,SmlPrims.chk_ovf_i32(v$982.length - 1)])):v$982);
t$1052 = (t$1051 + t$1050);
t$1053 = (t$1052 + "/");
return t$1053 + v$259;
} };
};
};
};
basis$0Path$1.getParent$260 = function(p$263){var v$314 = basis$0Path$1.fromString$107(p$263);
var v$315 = v$314[1];
var v$316 = v$314[2];
var v$317 = v$314[0];
var v$303;
var t$1055 = basis$0List$1.rev$257;
var t$1054;
var v$759 = basis$0List$1.rev$257(v$317);
if (v$759 == null) {t$1054 = ["..",null];
} else {var v$760 = v$759;
switch (v$760[0]) { case "": {var v$761 = v$760[1];
t$1054 = ((v$761 == null)?(v$315?null:["..",null]):["..",v$761]);
 break; }case ".": {t$1054 = ["..",v$760[1]];
 break; }case "..": {t$1054 = ["..",["..",v$760[1]]];
 break; }default: {t$1054 = v$760[1];
} };
};
v$303 = (t$1055(t$1054));
if (v$303 == null) {if (v$315) {return basis$0Path$1.toString$160(["",null],true,v$316);
} else {return ".";
};
} else {return basis$0Path$1.toString$160(v$303,v$315,v$316);
};
};
basis$0Path$1.mkCanonical$318 = function(p$321){var v$398 = basis$0Path$1.fromString$107(p$321);
var v$399 = v$398[1];
var v$400 = v$398[2];
var v$401 = v$398[0];
var t$1070 = basis$0Path$1.toString$160;
var t$1069;
var t$1068 = basis$0List$1.rev$257;
var t$1067;
var fix$1056 = {};
fix$1056.$h = function(v$766,v$767){lab$h: while (true) {if (v$766 == null) {return (v$767 == null)?(v$399?["",null]:[".",null]):v$767;
} else {var v$771 = v$766;
var v$772 = v$771[0];
switch (v$772) { case "": {var v$773 = v$771[1];
var t$1063 = v$773;
var t$1064 = v$767;
var v$766 = t$1063;
var v$767 = t$1064;
continue lab$h;
 break; }case ".": {var v$775 = v$771[1];
var t$1061 = v$775;
var t$1062 = v$767;
var v$766 = t$1061;
var v$767 = t$1062;
continue lab$h;
 break; }case "..": {var v$777 = v$771[1];
var t$1058 = v$777;
var t$1057;
if (v$767 == null) {t$1057 = (v$399?null:["..",null]);
} else {var v$780 = v$767;
switch (v$780[0]) { case "..": {t$1057 = ["..",["..",v$780[1]]];
 break; }default: {t$1057 = v$780[1];
} };
};
var t$1059 = t$1058;
var t$1060 = t$1057;
var v$766 = t$1059;
var v$767 = t$1060;
continue lab$h;
 break; }default: {var v$781 = v$771[1];
var t$1065 = v$781;
var t$1066 = [v$772,v$767];
var v$766 = t$1065;
var v$767 = t$1066;
continue lab$h;
} };
};
};
};
var h$765 = fix$1056.$h;
t$1067 = (h$765(v$401,null));
t$1069 = (t$1068(t$1067));
return t$1070(t$1069,v$399,v$400);
};
var fix$1071 = {};
fix$1071.$parentize = function(v$405){if (v$405 == null) {return null;
} else {var v$411 = v$405;
var v$412 = v$411[1];
return ["..",fix$1071.$parentize(v$412)];
};
};
var parentize$402 = fix$1071.$parentize;
basis$0Path$1.mkRelative$413 = function(v$483,v$484){var v$948 = basis$0Path$1.fromString$107(v$483);
var v$949 = basis$0Path$1.fromString$107(basis$0Path$1.mkCanonical$318(v$484));
if (v$949[1]) {if (v$948[1]) {var v$479 = v$948[2];
var v$480 = v$948[0];
var v$481 = v$949[2];
var v$482 = v$949[0];
var fix$1072 = {};
fix$1072.$h = function(v$435,v$438){lab$h: while (true) {if (v$435 == null) {if (v$438 == null) {return [".",null];
} else {return parentize$402(v$438);
};
} else {if (v$438 == null) {return v$435;
} else {var v$466 = v$435;
var v$467 = v$466[0];
var v$468 = v$466[1];
var v$469 = v$438;
var v$470 = v$469[0];
var v$471 = v$469[1];
if (v$467 == v$470) {var t$1073 = v$468;
var t$1074 = v$471;
var v$435 = t$1073;
var v$438 = t$1074;
continue lab$h;
} else {var t$1081 = basis$0List$1.s$n$268;
var t$1080 = parentize$402(v$438);
var t$1079;
var t$1075;
var v$959 = ["",null];
var fix$1076 = {};
fix$1076.$eq_list = function(v$1006,v$1007){lab$eq_list: while (true) {if (v$1006 == null) {return (v$1007 == null)?true:false;
} else {if (v$1007 == null) {return false;
} else {var v$1008 = v$1006;
var v$1009 = v$1007;
if (v$1008[0] == v$1009[0]) {var t$1077 = v$1008[1];
var t$1078 = v$1009[1];
var v$1006 = t$1077;
var v$1007 = t$1078;
continue lab$eq_list;
} else {return false;
};
};
};
};
};
var eq_list$1005 = fix$1076.$eq_list;
t$1075 = (eq_list$1005(v$480,v$959));
t$1079 = (t$1075?null:v$435);
return t$1081(t$1080,t$1079);
};
};
};
};
};
var h$432 = fix$1072.$h;
if ((v$479 == v$481)?false:true) {throw basis$0Path$1.exn$Path$54;
} else {return basis$0Path$1.toString$160(h$432(v$480,v$482),false,"");
};
} else {return v$483;
};
} else {throw basis$0Path$1.exn$Path$54;
};
};
basis$0Path$1.mkAbsolute$485 = function(v$498,v$499){var t$1090;
var t$1089;
var t$1088;
var t$1087;
if (v$499.length >= 1) {var t$1086;
if (0 >= v$499.length) {throw CompilerInitial.exn$Subscript$52;
} else {t$1086 = (v$499.charCodeAt(0));
};
t$1087 = (t$1086 == 47);
} else {t$1087 = false;
};
t$1088 = (t$1087?[true,"",basis$0String$1.extract$116(v$499,1,[1])]:[false,"",v$499]);
t$1089 = t$1088[0];
t$1090 = (t$1089?false:true);
if (t$1090) {throw basis$0Path$1.exn$Path$54;
} else {var t$1085;
var t$1084;
var t$1083;
if (v$498.length >= 1) {var t$1082;
if (0 >= v$498.length) {throw CompilerInitial.exn$Subscript$52;
} else {t$1082 = (v$498.charCodeAt(0));
};
t$1083 = (t$1082 == 47);
} else {t$1083 = false;
};
t$1084 = (t$1083?[true,"",basis$0String$1.extract$116(v$498,1,[1])]:[false,"",v$498]);
t$1085 = t$1084[0];
if (t$1085) {return v$498;
} else {return basis$0Path$1.mkCanonical$318(basis$0Path$1.concat$218(v$499,v$498));
};
};
};
basis$0Path$1.isCanonical$500 = function(p$503){return (basis$0Path$1.mkCanonical$318(p$503)) == p$503;
};
basis$0Path$1.joinDirFile$504 = function(v$509,v$510){return basis$0Path$1.concat$218(v$509,v$510);
};
basis$0Path$1.splitDirFile$511 = function(p$514){var v$534 = basis$0Path$1.fromString$107(p$514);
var v$535 = v$534[1];
var v$536 = v$534[2];
var v$537 = v$534[0];
var v$524 = basis$0List$1.rev$257(v$537);
if (v$524 == null) {return [basis$0Path$1.toString$160(null,v$535,v$536),""];
} else {var v$531 = v$524;
var v$532 = v$531[0];
var v$533 = v$531[1];
return [basis$0Path$1.toString$160(basis$0List$1.rev$257(v$533),v$535,v$536),v$532];
};
};
basis$0Path$1.dir$538 = function(s$541){var t$1091;
var v$821 = basis$0Path$1.fromString$107(s$541);
var v$822 = v$821[1];
var v$823 = v$821[2];
var v$824 = v$821[0];
var v$825 = basis$0List$1.rev$257(v$824);
if (v$825 == null) {t$1091 = [basis$0Path$1.toString$160(null,v$822,v$823),""];
} else {var v$826 = v$825;
var v$827 = v$826[0];
var v$828 = v$826[1];
t$1091 = [basis$0Path$1.toString$160(basis$0List$1.rev$257(v$828),v$822,v$823),v$827];
};
return t$1091[0];
};
basis$0Path$1.file$546 = function(s$549){var t$1092;
var v$830 = basis$0Path$1.fromString$107(s$549);
var v$831 = v$830[1];
var v$832 = v$830[2];
var v$833 = v$830[0];
var v$834 = basis$0List$1.rev$257(v$833);
if (v$834 == null) {t$1092 = [basis$0Path$1.toString$160(null,v$831,v$832),""];
} else {var v$835 = v$834;
var v$836 = v$835[0];
var v$837 = v$835[1];
t$1092 = [basis$0Path$1.toString$160(basis$0List$1.rev$257(v$837),v$831,v$832),v$836];
};
return t$1092[1];
};
basis$0Path$1.joinBaseExt$554 = function(v$1004,v$568){switch (v$568[0]) { case 1: {return v$1004;
 break; }default: {var v$570 = v$568[1];
switch (v$570) { case "": {return v$1004;
 break; }default: {return (v$1004 + ".") + v$570;
} };
} };
};
basis$0Path$1.splitBaseExt$573 = function(s$576){var v$601;
var v$841 = basis$0Path$1.fromString$107(s$576);
var v$842 = v$841[1];
var v$843 = v$841[2];
var v$844 = v$841[0];
var v$845 = basis$0List$1.rev$257(v$844);
if (v$845 == null) {v$601 = [basis$0Path$1.toString$160(null,v$842,v$843),""];
} else {var v$846 = v$845;
var v$847 = v$846[0];
var v$848 = v$846[1];
v$601 = [basis$0Path$1.toString$160(basis$0List$1.rev$257(v$848),v$842,v$843),v$847];
};
var v$602 = v$601[0];
var v$603 = v$601[1];
var v$595;
var v$998 = v$603.length;
var stop$854 = SmlPrims.chk_ovf_i32(0 - 1);
var fix$1093 = {};
fix$1093.$scan = function(j$856){lab$scan: while (true) {var t$1094;
if (j$856 > stop$854) {var c$988 = v$603.charCodeAt(j$856);
t$1094 = ((c$988 == 46)?false:true);
} else {t$1094 = false;
};
if (t$1094) {var t$1095 = SmlPrims.chk_ovf_i32(j$856 - 1);
var j$856 = t$1095;
continue lab$scan;
} else {return j$856;
};
};
};
var scan$855 = fix$1093.$scan;
var v$857 = SmlPrims.chk_ovf_i32((SmlPrims.chk_ovf_i32((scan$855(SmlPrims.chk_ovf_i32((SmlPrims.chk_ovf_i32(0 + v$998)) - 1))) - 0)) + 1);
v$595 = [[v$603,0,v$857],[v$603,SmlPrims.chk_ovf_i32(0 + v$857),SmlPrims.chk_ovf_i32(v$998 - v$857)]];
var v$596 = v$595[0];
var v$597 = v$595[1];
if ((v$597[2] == 0)?true:((v$596[2] == 0)?true:(v$596[2] == 1))) {return [s$576,[1]];
} else {var t$1102;
var v$881 = v$596[0];
var v$882 = v$596[1];
var v$883 = v$596[2];
var v$975;
var v$869 = (1 > v$883)?[v$881,v$882,0]:[v$881,v$882,SmlPrims.chk_ovf_i32(v$883 - 1)];
var v$870 = v$869[0];
var v$871 = v$869[1];
var v$872 = v$869[2];
var newstr$873 = Array(v$872);
var fix$1103 = {};
fix$1103.$loop = function(v$876,v$877,v$878){lab$loop: while (true) {if (v$878 > 0) {(newstr$873[v$877] = (v$870.charCodeAt(v$876)),0);
var t$1104 = SmlPrims.chk_ovf_i32(v$876 + 1);
var t$1105 = SmlPrims.chk_ovf_i32(v$877 + 1);
var t$1106 = SmlPrims.chk_ovf_i32(v$878 - 1);
var v$876 = t$1104;
var v$877 = t$1105;
var v$878 = t$1106;
continue lab$loop;
} else {return 0;
};
};
};
var loop$874 = fix$1103.$loop;
loop$874(v$871,0,v$872);
v$975 = (SmlPrims.charArrayToString(newstr$873));
t$1102 = (basis$0Path$1.concat$218(v$602,v$975));
var t$1101;
var t$1096;
var v$885 = v$597[0];
var v$886 = v$597[1];
var v$887 = v$597[2];
var newstr$888 = Array(v$887);
var fix$1097 = {};
fix$1097.$loop = function(v$891,v$892,v$893){lab$loop: while (true) {if (v$893 > 0) {(newstr$888[v$892] = (v$885.charCodeAt(v$891)),0);
var t$1098 = SmlPrims.chk_ovf_i32(v$891 + 1);
var t$1099 = SmlPrims.chk_ovf_i32(v$892 + 1);
var t$1100 = SmlPrims.chk_ovf_i32(v$893 - 1);
var v$891 = t$1098;
var v$892 = t$1099;
var v$893 = t$1100;
continue lab$loop;
} else {return 0;
};
};
};
var loop$889 = fix$1097.$loop;
loop$889(v$886,0,v$887);
t$1096 = (SmlPrims.charArrayToString(newstr$888));
t$1101 = [0,t$1096];
return [t$1102,t$1101];
};
};
basis$0Path$1.ext$604 = function(s$607){return (basis$0Path$1.splitBaseExt$573(s$607))[1];
};
basis$0Path$1.base$612 = function(s$615){return (basis$0Path$1.splitBaseExt$573(s$615))[0];
};
basis$0Path$1.fromUnixPath$620 = function(p$623){return p$623;
};
basis$0Path$1.toUnixPath$624 = function(p$627){return p$627;
};
return 0;
})();
